---
title: STL 03 shared_ptr
tags:
categories:
- language
- cpp
---

## shared_ptr

	#include <iostream>
	#include <memory>
	
	using namespace std;
	
	int main(int argc, char *argv[])
	{
	
	    /**
	     * shared_ptr智能指针使用方法:
	     * std::shared_ptr<Entity> e1(new Entity());
	     * std::shared_ptr<Entity> e1 = std::make_shared<Entity>();
	     */
	
	    auto ptr = std::make_shared<char *>();
	    std::shared_ptr<char *> ptr1 = std::make_shared<char *>();
	    *ptr1 = "Hello world 1";
	    cout << *ptr1 << endl;
	
	    std::shared_ptr<char *> ptr2(new char *());
	    *ptr2 = "Hello world 2";
	    cout << *ptr2 << endl;
	
	    { // 离开此作用域后ptr3自动销毁
	        auto ptr3 = ptr2;
	        cout << *ptr3 << endl;
	        cout << ptr2.use_count() << endl;
	    }
	    cout << ptr2.use_count() << endl;
	
	    return 0;
	}

