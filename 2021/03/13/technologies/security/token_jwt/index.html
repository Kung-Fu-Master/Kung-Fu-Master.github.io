<!-- build time:Fri Jun 11 2021 00:17:21 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Hexo" href="https://kung-fu-master.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Hexo" href="https://kung-fu-master.github.io/atom.xml"><link rel="alternate" type="application/json" title="Hexo" href="https://kung-fu-master.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="security"><link rel="canonical" href="https://kung-fu-master.github.io/2021/03/13/technologies/security/token_jwt/"><title>Token jwt - security - technologies | Kung Fu Master = Hexo</title><meta name="generator" content="Hexo 4.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Token jwt</h1><div class="meta"><span class="item" title="创建时间：2021-03-13 13:00:42"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-03-13T13:00:42+08:00">2021-03-13</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>7.2k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>7 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Kung Fu Master</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipex2cdtbj20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipewkhf1zj20zk0m81kx.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicit31ffoj20zk0m8naf.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclga70tsj20zk0m84mr.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclize41wj20zk0m87gk.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicitht3xtj20zk0m8k5v.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/technologies/" itemprop="item" rel="index" title="分类于 technologies"><span itemprop="name">technologies</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/technologies/security/" itemprop="item" rel="index" title="分类于 security"><span itemprop="name">security</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://kung-fu-master.github.io/2021/03/13/technologies/security/token_jwt/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Kung-Fu-Master"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hexo"></span><div class="body md" itemprop="articleBody"><h1 id="reference"><a class="anchor" href="#reference">#</a> Reference</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vTXlDb2RlMTk5MC9wLzEzMDk2NDIzLmh0bWw=">csdn blog</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC80OTQxYTI2OWE5ZDg=">简书</span></li></ul><h1 id="json-web-tokenjwt简介"><a class="anchor" href="#json-web-tokenjwt简介">#</a> <strong>Json Web Token (JWT) 简介</strong></h1><p>JWT 属于 Token 验证方式的一种方法.</p><blockquote><p>JSON Web Token（JWT）是一个开放标准（RFC 7519），它定义了一种紧凑的、自包含的方式，用于作为 JSON 对象在各方之间安全地传输信息。此信息可以验证和信任，因为它是数字签名的。JWTs 可以使用密钥（使用 HMAC 算法）或使用 RSA 或 ECDSA 的公钥 / 私钥对进行签名.</p></blockquote><h1 id="传统服务端验证客户端身份的方法"><a class="anchor" href="#传统服务端验证客户端身份的方法">#</a> <strong>传统服务端验证客户端身份的方法</strong></h1><p>HTTP 是一种没有状态的协议，也就是它并不知道是谁是访问应用。这里我们把用户看成是客户端，客户端使用用户名还有密码通过了身份验证，不过下回这个客户端再发送请求时候，还得再验证一下。</p><p>解决的方法就是，当用户请求登录的时候，如果没有问题，我们在服务端生成一条记录，这个记录里可以说明一下登录的用户是谁，然后把这条记录的 ID 号发送给客户端，客户端收到以后把这个 ID 号存储在 Cookie 里，下次这个用户再向服务端发送请求的时候，可以带着这个 Cookie ，这样服务端会验证一个这个 Cookie 里的信息，看看能不能在服务端这里找到对应的记录，如果可以，说明用户已经通过了身份验证，就把用户请求的数据返回给客户端。</p><p>上面说的就是 Session，我们需要在服务端存储为登录的用户生成的 Session ，这些 Session 可能会存储在内存，磁盘，或者数据库里。我们可能需要在服务端定期的去清理过期的 Session 。</p><h1 id="基于-token-的身份验证方法"><a class="anchor" href="#基于-token-的身份验证方法">#</a> <strong>基于 Token 的身份验证方法</strong></h1><p>Token 是在客户端频繁向服务端请求数据，服务端频繁的去数据库查询用户名和密码并进行对比，判断用户名和密码正确与否，并作出相应提示，在这样的背景下，Token 便应运而生。<br>Token 是服务端生成的一串字符串，以作客户端进行请求的一个令牌，当第一次登录后，服务器生成一个 Token 便将此 Token 返回给客户端，以后客户端只需带上这个 Token 前来请求数据即可，无需再次带上用户名和密码。<br>使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：</p><ol><li>客户端使用用户名跟密码请求登录</li><li>服务端收到请求，去验证用户名与密码</li><li>验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端</li><li>客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里</li><li>客户端每次向服务端请求资源的时候需要带着服务端签发的 Token</li><li>服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据</li></ol><h1 id="为什么要使用json-web-token"><a class="anchor" href="#为什么要使用json-web-token">#</a> <strong>为什么要使用 JSON Web Token</strong></h1><ul><li>Token 的目的是为了减轻服务器的压力，减少频繁的查询数据库，使服务器更加健壮.</li><li>JSON 比 XML 不那么冗长，当它被编码时，它的大小也更小，使得 JWT 比 SAML 更紧凑。这使得 JWT 成为在 HTML 和 HTTP 环境中传递的一个很好的选择。</li><li>安全方面，使用 HMAC 算法，SWT 只能由共享密钥对称签名。但是，JWT 和 SAML 令牌可以使用 X.509 证书形式的公钥 / 私钥对进行签名。与签名 JSON 的简单性相比，使用 XML 数字签名来签名 XML 而不引入隐藏的安全漏洞是非常困难的。</li><li>JSON 解析器在大多数编程语言中都很常见，因为它们直接映射到对象。相反，XML 没有自然的文档到对象的映射。这使得使用 JWT 比使用 SAML 断言更容易。</li><li>在使用方面，JWT 是在互联网上使用的。这突出了 JSON Web 令牌在多个平台（尤其是移动平台）上客户端处理的方便性。</li><li>比较编码 JWT 和编码 SAML 的长度.</li></ul><h1 id="jwtjson-web-token-一种token验证方法"><a class="anchor" href="#jwtjson-web-token-一种token验证方法">#</a> <strong>JWT (Json Web Token 一种 Token 验证方法)</strong></h1><p>实施 Token 验证的方法挺多的，还有一些标准方法，比如 JWT，读作：jot ，表示：JSON Web Tokens 。JWT 标准的 Token 有三个部分：</p><ul><li>header（头部）</li><li>payload（荷载，数据）</li><li>signature（签名）<br>中间用点分隔开，并且都会使用 Base64 编码，所以真正的 Token 看起来像这样：</li></ul><pre><code>	eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuaW5naGFvLm5ldCIsImV4cCI6IjE0Mzg5NTU0NDUiLCJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlfQ.SwyHTEx_RQppr97g4J5lKXtabJecpejuef8AqKYMAJc
</code></pre><h2 id="header-头部"><a class="anchor" href="#header-头部">#</a> <strong>Header 头部</strong></h2><ul><li>令牌的类型</li><li>正在使用的签名算法 (HMAC, SHA256, RSA 等)。</li></ul><p>每个 JWT token 里面都有一个 header，也就是头部数据。里面包含了使用的算法，这个 JWT 是不是带签名的或者加密的。主要就是说明一下怎么处理这个 JWT token 。<br>头部里包含的东西可能会根据 JWT 的类型有所变化，比如一个加密的 JWT 里面要包含使用的加密的算法。唯一在头部里面要包含的是 alg 这个属性，如果是加密的 JWT，这个属性的值就是使用的签名或者解密用的算法。如果是未加密的 JWT，这个属性的值要设置成 none。<br>示例：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	  <span class="token string">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	  <span class="token string">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>意思是这个 JWT 用的算法是 HS256。上面的内容得用 base64url 的形式编码一下，所以就变成这样：</p><pre><code>	eyJhbGciOiJIUzI1NiJ9
</code></pre><h2 id="payload-有效负载"><a class="anchor" href="#payload-有效负载">#</a> <strong>Payload 有效负载</strong></h2><p>有效负载包含了 &quot;声明 (claims)&quot;, 有三种类型的 claims：</p><ul><li>registered claims 已注册的 (不是强制的，而是推荐，iss（发行者）、exp（到期时间）、sub（主题）、aud（受众）和其他)</li><li>public claims 公开的 (可以由使用 JWT 的用户随意定义，为了避免冲突，应该在<span class="exturl" data-url="aHR0cHM6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvand0L2p3dC54aHRtbA=="> IANA JSON Web 令牌注册表</span>中定义它们，或者将它们定义为包含防冲突命名空间的 URI)</li><li>private claims 私有的</li></ul><p>Payload 里面是 Token 的具体内容，这些内容里面有一些是标准字段，你也可以添加其它需要的内容。下面是标准字段：</p><ul><li>iss：Issuer，发行者</li><li>sub：Subject，主题</li><li>aud：Audience，观众</li><li>exp：Expiration time，过期时间</li><li>nbf：Not before</li><li>iat：Issued at，发行时间</li><li>jti：JWT ID</li></ul><p>比如下面这个 Payload ，用到了 iss 发行人，还有 exp 过期时间这两个标准字段。另外还有两个自定义的字段，一个是 name ，还有一个是 admin 。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	  <span class="token string">"sub"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	  <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	  <span class="token string">"iss"</span><span class="token operator">:</span> <span class="token string">"ninghao.net"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token string">"exp"</span><span class="token operator">:</span> <span class="token string">"1438955445"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	  <span class="token string">"admin"</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>使用 base64url 编码以后就变成了这个样子：</p><pre><code>	 eyJpc3MiOiJuaW5naGFvLm5ldCIsImV4cCI6IjE0Mzg5NTU0NDUiLCJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlfQ
</code></pre><p><strong>请注意，对于已签名的令牌，此信息虽然受保护不受篡改，但任何人都可以读取。除非经过加密，否则不要将机密信息放在 JWT 的有效负载或头部</strong>.</p><h2 id="signature-签名"><a class="anchor" href="#signature-签名">#</a> <strong>Signature 签名</strong></h2><p>要创建签名部分，您必须已经有了 经过编码的<strong>头部</strong>、经过编码的<strong>负载</strong>、一个<strong>秘钥</strong>、在头部中指定的<strong>算法</strong>，这样就可以进行签名了.<br>Signature 这部分内容有三个部分，先是用 Base64 编码的 header.payload ，再用加密算法加密一下，加密的时候要放进去一个 Secret ，这个相当于是一个密码，这个密码秘密地存储在服务端。</p><ul><li>header</li><li>payload</li><li>secret</li></ul><pre><code>	const encodedString = base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload); 
	HMACSHA256(encodedString, 'secret');
</code></pre><p>处理完成以后看起来像这样：</p><pre><code>	 SwyHTEx_RQppr97g4J5lKXtabJecpejuef8AqKYMAJc
</code></pre><p>最后这个在服务端生成并且要发送给客户端的 Token 看起来像这样：</p><pre><code>	 eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuaW5naGFvLm5ldCIsImV4cCI6IjE0Mzg5NTU0NDUiLCJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlfQ.SwyHTEx_RQppr97g4J5lKXtabJecpejuef8AqKYMAJc
</code></pre><p>输出的内容是三个由点分隔的 Base64 URL 字符串。它可以在 HTML 和 HTTP 环境中轻松传递，它比 XML 的标准（如 SAML）更加紧凑.<br>客户端收到这个 Token 以后把它存储下来，下回向服务端发送请求的时候就带着这个 Token 。服务端收到这个 Token ，然后进行验证，通过以后就会返回给客户端想要的资源。</p><h2 id="签名的作用"><a class="anchor" href="#签名的作用">#</a> <strong>签名的作用:</strong></h2><p>(1) 签名用于验证消息在传输过程中没有被更改。<br>(2) 使用私钥签名的令牌，还可以验证 JWT 的发送者是它所说的发送者。</p><h1 id="签发-json-web-tokenjwt"><a class="anchor" href="#签发-json-web-tokenjwt">#</a> <strong>签发 Json Web Token (JWT)</strong></h1><ul><li>JWT 对 “信息” 进行签名，产生一个令牌。</li><li>签名的令牌可以验证其中包含的内容的完整性（防篡改）。</li><li>也可对 “信息” 加密，加密的令牌则对其他方隐藏这些内容。</li><li>当令牌使用公钥 / 私钥对签名时，签名还证明只有持有私钥的一方才是签名方。可以非对称加密方式证明了</li></ul><h2 id="hs256-算法签发json-web-tokenjwt"><a class="anchor" href="#hs256-算法签发json-web-tokenjwt">#</a> <strong>HS256 算法签发 Json Web Token (JWT)</strong></h2><p>这种算法需要一个密钥（密码）.<br>在项目里随便添加一个 .js 文件，比如 index.js，在文件里添加下面这些代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"><span>s</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// Token 数据</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">const</span> payload <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	name<span class="token operator">:</span> <span class="token string">'wanghao'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	admin<span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token comment">// 密钥</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">const</span> secret <span class="token operator">=</span> <span class="token string">'ILOVENINGHAO'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token comment">// 签发 Token</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">const</span> token <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">,</span> secret<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> expiresIn<span class="token operator">:</span> <span class="token string">'1day'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">// 输出签发的 Token</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span></pre></td></tr></table></figure><p>非常简单，就是用了刚刚为项目安装的 jsonwebtoken 里面提供的 jwt.sign 功能，去签发一个 token。这个 sign 方法需要三个参数：</p><ul><li>playload：签发的 token 里面要包含的一些数据。</li><li>secret：签发 token 用的密钥，在验证 token 的时候同样需要用到这个密钥。</li><li>options：一些其它的选项。</li></ul><p>在命令行下面，用 node 命令，执行一下项目里的 index.js 这个文件（node index.js），会输出应用签发的 token：</p><pre><code>	eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE1MjkwMzM5MDYsImV4cCI6MTUyOTEyMDMwNn0.DctA2QlUCrM6wLWkIO78wBVN0NLpjoIq4T5B_2WJ-PU
</code></pre><p>上面的 Token 内容并没有加密，所以如果用一些 JWT 解码功能，可以看到 Token 里面包含的内容，内容由三个部分组成，像这样：</p><pre><code>	// header
	{
	  &quot;alg&quot;: &quot;HS256&quot;, 
	  &quot;typ&quot;: &quot;JWT&quot;
	}
	// payload
	{
	  &quot;admin&quot;: true, 
	  &quot;iat&quot;: 1529033906, 
	  &quot;name&quot;: &quot;wanghao&quot;, 
	  &quot;exp&quot;: 1529120306
	}
	// signature
	DctA2QlUCrM6wLWkIO78wBVN0NLpjoIq4T5B_2WJ-PU
</code></pre><blockquote><p>假设用户通过了某种身份验证，你就可以使用上面的签发 Token 的功能为用户签发一个 Token。一般在客户端那里会把它保存在 Cookie 或 LocalStorage 里面。<br>用户下次向我们的应用请求受保护的资源的时候，可以在请求里带着我们给它签发的这个 Token，后端应用收到请求，检查签名，如果验证通过确定这个 Token 是我们自己签发的，那就可以为用户响应回他需要的资源。</p></blockquote><h2 id="rs256-算法签发json-web-tokenjwt"><a class="anchor" href="#rs256-算法签发json-web-tokenjwt">#</a> <strong>RS256 算法签发 Json Web Token (JWT)</strong></h2><p>默认签发还有验证 Token 的时候用的是 HS256 算法，这种算法需要一个密钥（密码）。我们还可以使用 RS256 算法签发与验证 JWT。这种方法可以让我们分离开签发与验证，签发时需要用一个密钥，验证时使用公钥，也就是有公钥的地方只能做验证，但不能签发 JWT。</p><p>在项目下面创建一个新的目录，里面可以存储即将生成的密钥与公钥文件。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token builtin class-name">cd</span> ~/desktop/jwt-demo</pre></td></tr><tr><td data-num="2"></td><td><pre>	$ <span class="token function">mkdir</span> config</pre></td></tr><tr><td data-num="3"></td><td><pre>	$ <span class="token builtin class-name">cd</span> config</pre></td></tr></table></figure><p><strong>密钥:</strong><br>先生成一个密钥文件：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>ssh-keygen -t rsa -b <span class="token number">2048</span> -f private.key</pre></td></tr></table></figure><p><strong>公钥:</strong><br>基于上面生成的密钥，再去创建一个对应的公钥：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>openssl rsa -in private.key -pubout -outform PEM -out public.key</pre></td></tr></table></figure><p><strong>签发 JWT（RS256 算法）</strong><br>用 RS256 算法签发 JWT 的时候，需要从文件系统上读取创建的密钥文件里的内容。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	 <span class="token comment">// 获取签发 JWT 时需要用的密钥</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	 <span class="token keyword">const</span> privateKey <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./config/private.key'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	 签发仍然使用 jwt<span class="token punctuation">.</span>sign 方法，只不过在选项参数里特别说明一下使用的算法是 <span class="token constant">RS256</span>：</pre></td></tr><tr><td data-num="5"></td><td><pre>	 <span class="token comment">// 签发 Token</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	 <span class="token keyword">const</span> tokenRS256 <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">,</span> privateKey<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> algorithm<span class="token operator">:</span> <span class="token string">'RS256'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	 <span class="token comment">// 输出签发的 Token</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'RS256 算法：'</span><span class="token punctuation">,</span> tokenRS256<span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="验证json-web-tokenjwt"><a class="anchor" href="#验证json-web-tokenjwt">#</a> <strong>验证 Json Web Token (JWT)</strong></h1><h2 id="hs256-算法验证json-web-tokenjwt"><a class="anchor" href="#hs256-算法验证json-web-tokenjwt">#</a> <strong>HS256 算法验证 Json Web TOken (JWT)</strong></h2><p>需要一个签发 token 时候用的密钥（密码）来验证，这种算法需要一个密钥（密码）.<br>验证 JWT 的用效性，确定一下用户的 JWT 是我们自己签发的，首先要得到用户的这个 JWT Token，然后用 jwt.verify 这个方法去做一下验证。这个方法是 Node.js 的 jsonwebtoken 这个包里提供的，在其它的应用框架或者系统里，你可能会找到类似的方法来验证 JWT。<br>打开项目的 index.js 文件，里面添加几行代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"><span>s</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 验证 Token</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token string">'bad secret'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> decoded</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>decoded<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>把要验证的 Token 数据，还有签发这个 Token 的时候用的那个密钥告诉 verify 这个方法，在一个回调里面有两个参数，error 表示错误，decoded 是解码之后的 Token 数据。</p><p>执行：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ node ~/desktop/jwt-demo/index.js</pre></td></tr></table></figure><p>输出：</p><pre><code>	eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE1MjkwMzQ3MzMsImV4cCI6MTUyOTEyMTEzM30.swXojmu7VimFu3BoIgAxxpmm2J05dvD0HT3yu10vuqU
	invalid signature
</code></pre><p>注意输出了一个 invalid signature ，表示 Token 里的签名不对，这是因为我们组长 verify 方法提供的密钥并不是签发 Token 的时候用的那个密钥。这样修改一下：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>jwt.verify<span class="token punctuation">(</span>token, secret, <span class="token punctuation">(</span>error, decoded<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">..</span>.</pre></td></tr></table></figure><p>再次运行，会输出类似的数据：</p><pre><code>	eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE1MjkwMzUzODYsImV4cCI6MTUyOTEyMTc4Nn0.mkNrt4TfcfmP22xd3C_GQn8qnUmlB39dKT9SpIBTBGI
	{ name: 'wanghao', admin: true, iat: 1529035386, exp: 1529121786 }
</code></pre><h2 id="rs256-算法验证json-web-tokenjwt"><a class="anchor" href="#rs256-算法验证json-web-tokenjwt">#</a> <strong>RS256 算法验证 Json Web Token (JWT)</strong></h2><p>验证 JWT（RS256 算法）<br>验证使用 RS256 算法签发的 JWT，需要在文件系统上读取公钥文件里的内容。然后用 jwt 的 verify 方法去做验证。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 获取验证 JWT 时需要用的公钥</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">const</span> publicKey <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./config/public.key'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	</pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token comment">// 验证 Token</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>tokenRS256<span class="token punctuation">,</span> publicKey<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> decoded</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>decoded<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="使用场景"><a class="anchor" href="#使用场景">#</a> <strong>使用场景</strong></h1><p><img data-src="token_scene1.png" alt=""></p><ol><li>应用程序或客户端，向授权服务器请求授权。</li><li>当授权被通过时，授权服务器将向应用程序返回一个访问令牌 token。</li><li>应用程序使用访问令牌访问受保护的资源。<br><strong>请注意，使用签名的令牌，令牌中包含的所有信息都将公开给用户或其他方（虽然他们无法更改它，但可以阅读）。这意味着您不应将机密信息放入令牌中.</strong></li></ol><div class="tags"><a href="/tags/security/" rel="tag"><i class="ic i-tag"></i> security</a></div></div><footer><div class="meta"></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Kung-Fu-Master 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Kung-Fu-Master 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="Kung-Fu-Master 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Kung-Fu-Master <i class="ic i-at"><em>@</em></i>Hexo</li><li class="link"><strong>本文链接：</strong> <a href="https://kung-fu-master.github.io/2021/03/13/technologies/security/token_jwt/" title="Token jwt">https://kung-fu-master.github.io/2021/03/13/technologies/security/token_jwt/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/03/13/storage/ceph/ceph_02_deployment/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipevgoki5j20zk0m84qp.jpg" title="Ceph 02 deployment on Kubernetes"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> ceph</span><h3>Ceph 02 deployment on Kubernetes</h3></a></div><div class="item right"><a href="/2021/03/13/technologies/security/jwt_jwks/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclhfehz7j20zk0m8u0x.jpg" title="jwt jwks"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> security</span><h3>jwt jwks</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#reference"><span class="toc-number">1.</span> <span class="toc-text"># Reference</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#json-web-tokenjwt简介"><span class="toc-number">2.</span> <span class="toc-text"># Json Web Token (JWT) 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#传统服务端验证客户端身份的方法"><span class="toc-number">3.</span> <span class="toc-text"># 传统服务端验证客户端身份的方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#基于-token-的身份验证方法"><span class="toc-number">4.</span> <span class="toc-text"># 基于 Token 的身份验证方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#为什么要使用json-web-token"><span class="toc-number">5.</span> <span class="toc-text"># 为什么要使用 JSON Web Token</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#jwtjson-web-token-一种token验证方法"><span class="toc-number">6.</span> <span class="toc-text"># JWT (Json Web Token 一种 Token 验证方法)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#header-头部"><span class="toc-number">6.1.</span> <span class="toc-text"># Header 头部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#payload-有效负载"><span class="toc-number">6.2.</span> <span class="toc-text"># Payload 有效负载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#signature-签名"><span class="toc-number">6.3.</span> <span class="toc-text"># Signature 签名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#签名的作用"><span class="toc-number">6.4.</span> <span class="toc-text"># 签名的作用:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#签发-json-web-tokenjwt"><span class="toc-number">7.</span> <span class="toc-text"># 签发 Json Web Token (JWT)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#hs256-算法签发json-web-tokenjwt"><span class="toc-number">7.1.</span> <span class="toc-text"># HS256 算法签发 Json Web Token (JWT)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rs256-算法签发json-web-tokenjwt"><span class="toc-number">7.2.</span> <span class="toc-text"># RS256 算法签发 Json Web Token (JWT)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#验证json-web-tokenjwt"><span class="toc-number">8.</span> <span class="toc-text"># 验证 Json Web Token (JWT)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#hs256-算法验证json-web-tokenjwt"><span class="toc-number">8.1.</span> <span class="toc-text"># HS256 算法验证 Json Web TOken (JWT)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rs256-算法验证json-web-tokenjwt"><span class="toc-number">8.2.</span> <span class="toc-text"># RS256 算法验证 Json Web Token (JWT)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用场景"><span class="toc-number">9.</span> <span class="toc-text"># 使用场景</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2021/03/13/technologies/security/key_digest_signature_certificates/" rel="bookmark" title="certificates, public/private key, signature digest">certificates, public/private key, signature digest</a></li><li><a href="/2021/03/13/technologies/security/pki/" rel="bookmark" title="PKI 体系概述">PKI 体系概述</a></li><li><a href="/2021/03/13/technologies/security/tls_ssl_https_http_protocol/" rel="bookmark" title="TLS/SSL/HTTP/HTTPS protocol">TLS/SSL/HTTP/HTTPS protocol</a></li><li><a href="/2021/03/13/linux/aws-sdk-cpp%E4%BA%9A%E9%A9%AC%E9%80%8A/" rel="bookmark" title="亚马逊aws-sdk-cpp">亚马逊aws-sdk-cpp</a></li><li><a href="/2021/03/13/technologies/security/ECDHE-RSA-AES256-GCM-SHA384%E8%A7%A3%E9%87%8A/" rel="bookmark" title="ECDHE-RSA-AES256-GCM-SHA384 解释">ECDHE-RSA-AES256-GCM-SHA384 解释</a></li><li><a href="/2021/03/13/technologies/security/algorithm_security/" rel="bookmark" title="algorithm security">algorithm security</a></li><li><a href="/2021/03/13/technologies/security/cfssl/" rel="bookmark" title="cfssl">cfssl</a></li><li><a href="/2021/03/13/technologies/security/openssl/" rel="bookmark" title="openssl">openssl</a></li><li><a href="/2021/03/13/technologies/security/jwt_jwks/" rel="bookmark" title="jwt jwks">jwt jwks</a></li><li class="active"><a href="/2021/03/13/technologies/security/token_jwt/" rel="bookmark" title="Token jwt">Token jwt</a></li><li><a href="/2021/03/16/technologies/security/openssl_update/" rel="bookmark" title="openssl update">openssl update</a></li><li><a href="/2021/03/21/technologies/security/kms_vault/" rel="bookmark" title="KMS vault">KMS vault</a></li><li><a href="/2021/05/31/technologies/security/openssl_certificates/" rel="bookmark" title="openssl certificates">openssl certificates</a></li><li><a href="/2021/05/31/technologies/security/keycloak/" rel="bookmark" title="Deploy keycloak on kubernetes">Deploy keycloak on kubernetes</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Kung-Fu-Master" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Kung-Fu-Master</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">318</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">42</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">14</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lvdXJuYW1l" title="https:&#x2F;&#x2F;github.com&#x2F;yourname"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;twitter.com&#x2F;yourname"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;yourname"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPXlvdXJpZA==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;yourid"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;about.me&#x2F;yourname"><i class="ic i-address-card"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/03/13/storage/ceph/ceph_02_deployment/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/03/13/technologies/security/jwt_jwks/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/reference/" title="分类于 reference">reference</a> <i class="ic i-angle-right"></i> <a href="/categories/reference/k8s/" title="分类于 k8s">k8s</a></div><span><a href="/2021/03/13/reference/k8s/10.Kubernetes%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%88%A9%E5%99%A8kubeadm/" title="10 | Kubernetes一键部署利器：kubeadm">10 | Kubernetes一键部署利器：kubeadm</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/microService/" title="分类于 microService">microService</a> <i class="ic i-angle-right"></i> <a href="/categories/microService/istio/" title="分类于 istio">istio</a></div><span><a href="/2021/05/31/microService/istio/istio_dashboard/" title="istio dashboard">istio dashboard</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/language/" title="分类于 language">language</a> <i class="ic i-angle-right"></i> <a href="/categories/language/nodejs/" title="分类于 nodejs">nodejs</a></div><span><a href="/2021/03/13/language/nodejs/1.webstorm%E8%87%AA%E5%8A%A8%E6%8F%90%E7%A4%BA%E8%AE%BE%E7%BD%AE/" title="1.webstorm自动提示设置">1.webstorm自动提示设置</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/language/" title="分类于 language">language</a> <i class="ic i-angle-right"></i> <a href="/categories/language/nodejs/" title="分类于 nodejs">nodejs</a></div><span><a href="/2021/03/13/language/nodejs/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/" title="浏览器工作原理">浏览器工作原理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/microService/" title="分类于 microService">microService</a> <i class="ic i-angle-right"></i> <a href="/categories/microService/istio/" title="分类于 istio">istio</a></div><span><a href="/2021/03/13/microService/istio/istio_problems/" title="Istio problems">Istio problems</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/reference/" title="分类于 reference">reference</a> <i class="ic i-angle-right"></i> <a href="/categories/reference/k8s/" title="分类于 k8s">k8s</a></div><span><a href="/2021/03/13/reference/k8s/22.%E6%92%AC%E5%8A%A8%E7%A6%BB%E7%BA%BF%E4%B8%9A%E5%8A%A1%EF%BC%9AJob%E4%B8%8ECronJob/" title="22 | 撬动离线业务：Job与CronJob">22 | 撬动离线业务：Job与CronJob</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/linux/" title="分类于 linux">linux</a></div><span><a href="/2021/03/13/linux/getopt_getopts_%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E9%95%BF%E5%8F%82%E6%95%B0/" title="getopt,getopts解析命令行长参数">getopt,getopts解析命令行长参数</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technologies/" title="分类于 technologies">technologies</a> <i class="ic i-angle-right"></i> <a href="/categories/technologies/docker/" title="分类于 docker">docker</a></div><span><a href="/2021/05/31/technologies/docker/docker_network/" title="docker 网络">docker 网络</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/language/" title="分类于 language">language</a> <i class="ic i-angle-right"></i> <a href="/categories/language/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/2021/03/13/language/cpp/new_char%5Bsize%5D()%E7%94%A8%E6%B3%95/" title="new char[size]()用法">new char[size]()用法</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/language/" title="分类于 language">language</a> <i class="ic i-angle-right"></i> <a href="/categories/language/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/2021/03/13/language/cpp/STL/03.shared_ptr/" title="STL 03 shared_ptr">STL 03 shared_ptr</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Kung-Fu-Master @ Kung Fu Master</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.2m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">18:26</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/03/13/technologies/security/token_jwt/",favicon:{show:"（●´3｀●）",hide:"（●´3｀●）"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->