---
title: ln软连接, head, tail, more&less
tags: 
categories:
- linux
---

## **ln链接**
ln（link）创建链接，`ln 原文件 链接文件` 表示生成一个硬链接文件，`-s` 表示生成软链接文件。

|         | 软链接 | 硬链接 |
| :------:| :-----: | :------: |
| 修改源文件 | 可以访问到 | 同步修改 |
| 删除源文件 | 无法访问 | 可以访问 |
| 文件类型 | 文件类型为l | 需要查看inode，和源文件用同一inode |
| 大小 | 很小 | 和源文件一样大 |
| 修改时间 | 新建时间 | 与源文件相同 |
| 访问权限 | 全开，但能否访问取决于源文件 | 和源文件相同 |
| 限制 |   | 不能跨分区建立、不能针对目录使用 |
| 箭头标识 | 不能跨分区建立、不能针对目录使用 |   |


所谓`硬链接`，其实就是多个文件公用一个inode，此时两个文件除了文件名以外所有信息都一样，读取文件时无论通过哪个文件名都能链接到唯一的inode，进而找到唯一的datablock，因此修改哪个文件最终都会影响两个文件，而如果删除任意一个文件，也不会导致数据不能访问，因为inode和block依然存在，所以硬链接比较安全。

`硬链接`实质上就是多了一个目录的block而已，不会对磁盘和inode数产生很大的影响。

因为要链接到同一个inode，所以硬链接不能跨文件系统（分区），至于为何硬链接不能针对目录，这主要是因为目录下的文件是经常变动的，这会导致这种链接关系难以维护。

`软链接`仅仅是建立一个到源文件的快捷方式，它是一个独立的文件，故和源文件的inode不同，这种文件的大小就是源文件的文件名占用的空间，删除源文件会导致无法打开软链接。

用cp命令也可以建立硬链接和软链接。

## **head, tail**

head可以指定看前几行，`head -n 20` 文件表示看前20行，如果不加选项代表看前10行。

tail和head类似，是看文件末尾行的，也可以使用-n来指定行数，-f代表动态查看，文件出现变化时tail命令的显示也会变化，常用来查看日志。按ctrl+c来退出查看状态。`tail -n +100` 文件表示查看文件100行后的数据。

显示文件的第11到第20行：`head -n 20 文件 | tail -n 10`

显示文件的第11到第20行且有行号：`cat -n 文件 | head -n 20 | tail -n 10`

## **more和less命令**

more也可以查看文件内容，它以百分比的形式显示查看文件内容多少，按f或空格可以翻页，回车可以看下一行，q或Q表示看完退出，但more不能向上翻页。还有搜索功能，在浏览状态下输入/要查找内容回车，就可以跳到那个位置，但是只能向下搜寻。

less和more类似，但加了向上翻的功能，pageup可以向上翻一页，上箭头可以向上看一行，less还可以查找内容，在浏览状态下输入/要查找内容回车，就可以跳到那个位置，按n跳到下一个搜索词，它可以向上搜寻，用？代替/即可。
