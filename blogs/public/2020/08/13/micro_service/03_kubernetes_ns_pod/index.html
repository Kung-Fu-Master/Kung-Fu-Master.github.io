<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>03 Kubernetes nodes, namespace, pod | Hexo</title>
  <meta name="keywords" content=" kubernetes ">
  <meta name="description" content="03 Kubernetes nodes, namespace, pod | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="查看Windows10 是否已安装或开启ssh-client，默认Windows10自带的有Windows 10 : 设置 -&gt; 应用(APPS) -&gt; 应用和功能(APP &amp; features) -&gt; 管理可选功能(Manage app execution aliases)  没有的话需要点击如图上面的Add a feature，install一下.  Centos">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows10_VScode远程连接linux编辑调试">
<meta property="og:url" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="查看Windows10 是否已安装或开启ssh-client，默认Windows10自带的有Windows 10 : 设置 -&gt; 应用(APPS) -&gt; 应用和功能(APP &amp; features) -&gt; 管理可选功能(Manage app execution aliases)  没有的话需要点击如图上面的Add a feature，install一下.  Centos">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/1.png">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/2.png">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/3.png">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/4.png">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/5.png">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/6.png">
<meta property="og:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/7.png">
<meta property="og:image" content="https://blog.csdn.net/Ding19950107/article/details/103713556">
<meta property="article:published_time" content="2020-08-12T16:05:49.334Z">
<meta property="article:modified_time" content="2020-04-07T12:31:34.325Z">
<meta property="article:author" content="Kung-Fu-Master">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kung-fu-master.github.io/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/1.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 4.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Kung-Fu-Master</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/yelog" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="facebook" href="https://www.facebook.com/faker.tops" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-facebook"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="instagram" href="https://www.facebook.com/faker.tops" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-instagram"></use>
                </svg>
            
        </a>
        
    
        
        <a title="reddit" href="https://www.reddit.com/user/yelog/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-reddit"></use>
                </svg>
            
        </a>
        
    
        
        <a title="weibo" href="http://weibo.com/u/2307534817" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
            
        </a>
        
    
        
        <a title="jianshu" href="https://www.jianshu.com/u/ff56736de7cf" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-jianshu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/people/jaytp/activities" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="oschina" href="https://my.oschina.net/yelog" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-oschina"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="email" href="mailto:jaytp@qq.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=872336115&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
        <a title="kugou" href="https://www.kugou.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-kugou"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88151013" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="All">All<small>(123)</small></div></li>
    
        
            
        
    
        
            
            <li><div data-rel="blogs">blogs<small>(5)</small></div>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="deeplearning">deeplearning<small>(1)</small></div>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="Englisth"><i class="fold iconfont icon-right"></i>Englisth<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="Englisth<--->5500">5500<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="language"><i class="fold iconfont icon-right"></i>language<small>(3)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="language<--->c">c<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="language<--->go">go<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="language<--->python">python<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="LearnLinks">LearnLinks<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="linux">linux<small>(58)</small></div>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="microService"><i class="fold iconfont icon-right"></i>microService<small>(15)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="microService<--->istio">istio<small>(4)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="microService<--->kubernetes">kubernetes<small>(10)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="microService<--->REST-API">REST-API<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="nodejs">nodejs<small>(8)</small></div>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="storage">storage<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="technologies"><i class="fold iconfont icon-right"></i>technologies<small>(21)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="technologies<--->docker">docker<small>(3)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="technologies<--->maven">maven<small>(6)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="technologies<--->security">security<small>(6)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="technologies<--->web前端">web前端<small>(4)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="windows">windows<small>(2)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">About</a><a style="width: 50%"  class="friends">Friends</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="123">
<input type="hidden" id="yelog_site_word_count" value="126.8k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>deeplearning</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>istio</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>kubernetes</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>security</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SSH-port</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>storage</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/Resources/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="Resources">Resources</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/09_kubernetes_certificate/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="08 Kubernetes Certificates">08 Kubernetes Certificates</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/08_kubernetes_samples_problems/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="08 Kubernetes samples and problems">08 Kubernetes samples and problems</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/07_kubernetes_Etcd/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="07 Kubernetes Etcd">07 Kubernetes Etcd</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/06_kubernetes_deployment/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="06 Kubernetes deployment">06 Kubernetes deployment</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/04_kubernetes_service/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="04 Kubernetes service">04 Kubernetes service</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/03_kubernetes_ns_pod/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="03 Kubernetes nodes, namespace, pod">03 Kubernetes nodes, namespace, pod</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/02_kubernetes_roles_introduction/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="02 kubernetes introduction">02 kubernetes introduction</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a id="top" class="All microService kubernetes "
           href="/2020/08/13/micro_service/01_kubernetes_build/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="01 Kubernetes build">01 Kubernetes build</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All windows "
           href="/2020/08/13/windows/Windows10_VScode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E7%BC%96%E8%BE%91%E8%B0%83%E8%AF%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Windows10_VScode远程连接linux编辑调试">Windows10_VScode远程连接linux编辑调试</span>
            <span class="post-date" title="2020-08-13 00:05:49">2020/08/13</span>
        </a>
        
        <a  class="All windows "
           href="/2020/08/13/windows/U%E7%9B%98%E5%88%86%E5%8C%BA%E4%B9%8B%E5%90%8E%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="U盘分区之后如何恢复">U盘分区之后如何恢复</span>
            <span class="post-date" title="2020-08-13 00:05:49">2020/08/13</span>
        </a>
        
        <a  class="All technologies web前端 "
           href="/2020/08/13/technologies/web/JavaScript/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="JavaScript">JavaScript</span>
            <span class="post-date" title="2020-08-13 00:05:49">2020/08/13</span>
        </a>
        
        <a  class="All technologies web前端 "
           href="/2020/08/13/technologies/web/HTML/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HTML">HTML</span>
            <span class="post-date" title="2020-08-13 00:05:49">2020/08/13</span>
        </a>
        
        <a  class="All technologies web前端 "
           href="/2020/08/13/technologies/web/datatables/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="web前端datatables框架">web前端datatables框架</span>
            <span class="post-date" title="2020-08-13 00:05:49">2020/08/13</span>
        </a>
        
        <a  class="All technologies web前端 "
           href="/2020/08/13/technologies/web/bootstrap/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="bootstrap">bootstrap</span>
            <span class="post-date" title="2020-08-13 00:05:49">2020/08/13</span>
        </a>
        
        <a  class="All technologies security "
           href="/2020/08/13/technologies/security/token_jwt/"
           data-tag="security"
           data-author="" >
            <span class="post-title" title="Token jwt">Token jwt</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies security "
           href="/2020/08/13/technologies/security/tls_ssl_https_http_protocol/"
           data-tag="security"
           data-author="" >
            <span class="post-title" title="TLS/SSL/HTTP/HTTPS protocol">TLS/SSL/HTTP/HTTPS protocol</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies security "
           href="/2020/08/13/technologies/security/pki/"
           data-tag="security"
           data-author="" >
            <span class="post-title" title="PKI 体系概述">PKI 体系概述</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies security "
           href="/2020/08/13/technologies/security/openssl_certificates/"
           data-tag="security"
           data-author="" >
            <span class="post-title" title="openssl certificates">openssl certificates</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies security "
           href="/2020/08/13/technologies/security/key_digest_signature_certificates/"
           data-tag="security"
           data-author="" >
            <span class="post-title" title="certificates, public/private key, signature digest">certificates, public/private key, signature digest</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies security "
           href="/2020/08/13/technologies/security/algorithm_security/"
           data-tag="security"
           data-author="" >
            <span class="post-title" title="algorithm security">algorithm security</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies maven "
           href="/2020/08/13/technologies/maven/ubuntu18.04%E5%AE%89%E8%A3%85Mysql8.0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Ubuntu18.04 安装 Mysql8.0">Ubuntu18.04 安装 Mysql8.0</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies maven "
           href="/2020/08/13/technologies/maven/thrift/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="thrift">thrift</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies maven "
           href="/2020/08/13/technologies/maven/navicat_premium/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="navicat">navicat</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies maven "
           href="/2020/08/13/technologies/maven/maven_project/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="maven project">maven project</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies maven "
           href="/2020/08/13/technologies/maven/maven_eclipse_tomcat_JDK1.8_configuration/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Maven_eclipse_tomcat_JDK1.8_configuration">Maven_eclipse_tomcat_JDK1.8_configuration</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies maven "
           href="/2020/08/13/technologies/maven/IntelliJ_idea/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="IntelliJ idea">IntelliJ idea</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies docker "
           href="/2020/08/13/technologies/docker/docker_step_02/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="docker 02 private hub &amp; journal">docker 02 private hub &amp; journal</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies docker "
           href="/2020/08/13/technologies/docker/docker_step_01/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="docker 01 installation and control commands">docker 01 installation and control commands</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies docker "
           href="/2020/08/13/technologies/docker/dockerfile/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Dockerfile introduction">Dockerfile introduction</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies "
           href="/2020/08/13/technologies/Intel_tips_at_work/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Intel_tips_at_work">Intel_tips_at_work</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All technologies "
           href="/2020/08/13/technologies/git_problems_encountered/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git">git</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All storage "
           href="/2020/08/13/storage/minIO_03_client.md/"
           data-tag="storage"
           data-author="" >
            <span class="post-title" title="MinIO 03 client">MinIO 03 client</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All storage "
           href="/2020/08/13/storage/minIO_02_deployment_on_kubernetes/"
           data-tag="storage"
           data-author="" >
            <span class="post-title" title="MinIO deployment on kubernetes">MinIO deployment on kubernetes</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All storage "
           href="/2020/08/13/storage/minIO_01_conception/"
           data-tag="storage"
           data-author="" >
            <span class="post-title" title="MinIO 01 conception">MinIO 01 conception</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All storage "
           href="/2020/08/13/storage/greenplum/"
           data-tag="storage"
           data-author="" >
            <span class="post-title" title="Greenplum Deployment on Kubernetes">Greenplum Deployment on Kubernetes</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All storage "
           href="/2020/08/13/storage/ceph_deployment_02/"
           data-tag="storage"
           data-author="" >
            <span class="post-title" title="Ceph Storage Deployment on Kubernetes">Ceph Storage Deployment on Kubernetes</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All storage "
           href="/2020/08/13/storage/ceph_conception_01/"
           data-tag="storage"
           data-author="" >
            <span class="post-title" title="Ceph Storage Conception 01">Ceph Storage Conception 01</span>
            <span class="post-date" title="2020-08-13 00:05:48">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="浏览器工作原理">浏览器工作原理</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/NodeJs%E7%AE%80%E4%BB%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="NodeJs简介">NodeJs简介</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/Express%E7%AE%80%E4%BB%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Express简介">Express简介</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/4.node_modules/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="4.node_modules">4.node_modules</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/3.JSP%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0,%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="3.匿名函数,自执行函数">3.匿名函数,自执行函数</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/2.Windows10_Node.js_%E5%AE%89%E8%A3%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="2.Windows10 Node.js 安装">2.Windows10 Node.js 安装</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/2.Linux_Node.js_%E5%AE%89%E8%A3%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="2.Linux Node.js 安装">2.Linux Node.js 安装</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All nodejs "
           href="/2020/08/13/nodejs/1.webstorm%E8%87%AA%E5%8A%A8%E6%8F%90%E7%A4%BA%E8%AE%BE%E7%BD%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="1.webstorm自动提示设置">1.webstorm自动提示设置</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All microService REST-API "
           href="/2020/08/13/micro_service/services_analysis/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="1.services analysis">1.services analysis</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All microService istio "
           href="/2020/08/13/micro_service/Istio_K8s_SpringCloud/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="Istio_K8s_SpringCloud">Istio_K8s_SpringCloud</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All microService istio "
           href="/2020/08/13/micro_service/istio_03_configuration/"
           data-tag="istio"
           data-author="" >
            <span class="post-title" title="Istio 03 configuration">Istio 03 configuration</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All microService istio "
           href="/2020/08/13/micro_service/istio_02_installation/"
           data-tag="istio"
           data-author="" >
            <span class="post-title" title="Istio 02 Installation on Kubernetes">Istio 02 Installation on Kubernetes</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All microService istio "
           href="/2020/08/13/micro_service/istio_01_conception/"
           data-tag="istio"
           data-author="" >
            <span class="post-title" title="Istio 01 conception">Istio 01 conception</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All microService kubernetes "
           href="/2020/08/13/micro_service/05_kubernetes_volume/"
           data-tag="kubernetes"
           data-author="" >
            <span class="post-title" title="05 Kubernetes volumes">05 Kubernetes volumes</span>
            <span class="post-date" title="2020-08-13 00:05:47">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E8%BF%9E%E6%8E%A5router%E5%90%8E%E6%9C%BA%E5%99%A8%E8%BF%9E%E4%B8%8D%E4%B8%8A%E5%A4%96%E7%BD%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="连接router后机器连不上外网">连接router后机器连不上外网</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E8%A7%A3%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4%E5%90%88%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="解压缩命令合集">解压缩命令合集</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E9%94%99%E8%AF%AF_r_command%20not%20found/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="脚本执行错误 $&#39;\r&#39;:command not found">脚本执行错误 $&#39;\r&#39;:command not found</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E7%A1%AC%E7%9B%98%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E5%8D%95%E4%BD%8DGB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="硬盘存储空间单位GB">硬盘存储空间单位GB</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98-%E4%BD%BF%E7%94%A8dev_mem&mmap/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="用户态和内核共享内存----使用 /dev/mem &amp; mmap">用户态和内核共享内存----使用 /dev/mem &amp; mmap</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E6%9F%A5%E7%9C%8BSSD/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="查看SSD">查看SSD</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/%E6%8C%89%E5%AD%97%E8%8A%82-%E5%AD%97%E5%AF%BB%E5%9D%80_%E5%AD%97%E9%95%BF_%E5%9C%B0%E5%9D%80%E6%80%BB%E7%BA%BF_%E6%95%B0%E6%8D%AE%E6%80%BB%E7%BA%BF%E5%85%B3%E7%B3%BB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="按字节/字寻址，字长，地址总线，数据总线关系">按字节/字寻址，字长，地址总线，数据总线关系</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/yum%E4%BD%BF%E7%94%A8%E5%92%8C%E5%AE%89%E8%A3%85cmake-3%E7%89%88%E6%9C%AC%E4%B8%8A/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="yum使用和安装cmake 3 版本上">yum使用和安装cmake 3 版本上</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/yum%E4%B8%8B%E8%BD%BD%E9%81%87%E5%88%B0XZ_5.1.2alpha%E9%97%AE%E9%A2%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="yum下载遇到XZ_5.1.2alpha问题">yum下载遇到XZ_5.1.2alpha问题</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Windows10mstsc%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95Centos7.0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Windows10 mstsc远程登录Centos7.0">Windows10 mstsc远程登录Centos7.0</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/wget_www.baidu.com/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="wget www.baidu.com">wget www.baidu.com</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/vim/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vim">vim</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/U%E7%9B%98%E5%AE%89%E8%A3%85OS_Ubuntu_18.04/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="U盘安装OS_Ubuntu_18.04">U盘安装OS_Ubuntu_18.04</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/U%E7%9B%98%E5%88%86%E5%8C%BA%E4%B9%8B%E5%90%8E%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="U盘制作启动盘分区后恢复">U盘制作启动盘分区后恢复</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/U%E7%9B%98RAW%E7%B1%BB%E5%9E%8B%E4%BF%AE%E5%A4%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="U盘RAW类型修复">U盘RAW类型修复</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85CUDA8.0%E5%8F%8Anvidia%E9%A9%B1%E5%8A%A8(%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B)/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Ubuntu下安装CUDA8.0及nvidia驱动(详细教程）">Ubuntu下安装CUDA8.0及nvidia驱动(详细教程）</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/TSC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="TSC">TSC</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/ssh%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"
           data-tag="SSH-port"
           data-author="" >
            <span class="post-title" title="ssh端口映射">ssh端口映射</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/sda_hda/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="sda hda">sda hda</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/screen%E7%A8%8B%E5%BA%8F%E5%9C%A8%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="screen程序在后台运行">screen程序在后台运行</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/scp%E6%9C%BA%E5%99%A8%E9%97%B4%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="scp机器间复制文件">scp机器间复制文件</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/rpm_yum/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="RPM, yum">RPM, yum</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/RHEL8.0%E5%BC%80%E6%9C%BA%E6%80%BB%E6%98%AF%E8%A6%81dhclient%E6%89%8B%E5%8A%A8%E8%8E%B7%E5%8F%96IP/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="RHEL8.0开机总是要dhclient手动获取IP">RHEL8.0开机总是要dhclient手动获取IP</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/PTU(Power%20Thermal%20Utility)/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="PTU(Power Thermal Utility)">PTU(Power Thermal Utility)</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/perf/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="perf">perf</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/ntpdate_synchronize_os_time/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ntpdate 同步各个系统时间">ntpdate 同步各个系统时间</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/MMIO/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="MMIO">MMIO</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/ln_-s_-_linux%20%E8%BD%AF%E8%BF%9E%E6%8E%A5command/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ln -s - linux 软连接command">ln -s - linux 软连接command</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All "
           href="/2020/08/13/linux/Linux%E8%83%BD%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91_%E5%A4%96%E7%BD%91%E5%8D%B4%E8%AE%BF%E9%97%AE%E4%B8%8D%E4%BA%86%E6%AD%A4Linux/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux/Linux能访问外网_外网却访问不了此Linux">linux/Linux能访问外网_外网却访问不了此Linux</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/linux%E7%BB%99grub%E6%B7%BB%E5%8A%A0%E5%86%85%E6%A0%B8%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux给grub添加内核启动参数">linux给grub添加内核启动参数</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Linux%E6%B0%B8%E8%BF%9C%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux 永远修改时间">Linux 永远修改时间</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/linux%E6%9F%A5%E7%9C%8B%E8%BF%90%E8%A1%8C%E7%9A%84%E6%9C%8D%E5%8A%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux查看运行的服务">linux查看运行的服务</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/linux%E6%97%A5%E5%BF%97_%E6%9C%8D%E5%8A%A1%E6%97%A5%E5%BF%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="查看 linux 系统日志 和 服务的日志">查看 linux 系统日志 和 服务的日志</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/linux%E5%90%91%E5%85%B6%E5%AE%83%E7%BB%88%E7%AB%AF%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux向其它终端发送消息">linux向其它终端发送消息</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/linux%E5%88%B6%E4%BD%9CU%E7%9B%98%E5%90%AF%E5%8A%A8%E7%9B%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux制作U盘启动盘">linux制作U盘启动盘</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Linux_kernel_%E6%9B%B4%E6%96%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux kernel 更新">Linux kernel 更新</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Linux_kernel_userspace%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux kernel userspace体系结构">Linux kernel userspace体系结构</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Linux_command_find_grep_sed_awk/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux command, find, grep,sed, awk">Linux command, find, grep,sed, awk</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Linux%20%E4%BF%AE%E6%94%B9root%E5%90%8D%E7%A7%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux 修改root名称">Linux 修改root名称</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/intel_pstate-acpi-cpufreq%E9%A9%B1%E5%8A%A8%E7%A0%94%E7%A9%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="intel_pstate/acpi-cpufreq驱动研究">intel_pstate/acpi-cpufreq驱动研究</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Intel_pstate-acpi-cpufreq%E9%A9%B1%E5%8A%A8%E5%88%87%E6%8D%A2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Intel_pstate/acpi-cpufreq驱动切换">Intel_pstate/acpi-cpufreq驱动切换</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Intel_pstate&HWP%E5%8A%9F%E8%83%BDenable_disable/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Intel_pstate &amp; HWP功能enable/disable">Intel_pstate &amp; HWP功能enable/disable</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/history/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux中禁用命令历史记录">Linux中禁用命令历史记录</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/fdisk%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="fdisk磁盘分区">fdisk磁盘分区</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/etc_profile-etc_bashrc-~.bashrc/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="/etc/profile, /etc/bashrc, ~/.bashrc">/etc/profile, /etc/bashrc, ~/.bashrc</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/EOF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="EOF">EOF</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/emon/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="emon">emon</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/docker/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="docker">docker</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/dmidecode/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="dmidecode">dmidecode</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Devtoolset%20%E5%8D%87%E7%BA%A7gcc%E5%88%B08.3.1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Devtoolset 升级gcc到8.3.1">Devtoolset 升级gcc到8.3.1</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/dd_command/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="dd">dd</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/curl_wget/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="curl &amp; wget">curl &amp; wget</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/CPU%E8%A7%92%E5%BA%A6%E7%90%86%E8%A7%A3PCIE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CPU角度理解PCIE">CPU角度理解PCIE</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/cppc%E5%8A%A8%E6%80%81%E8%B0%83%E9%A2%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="cppc动态调频">cppc动态调频</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/cmake/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="cmake">cmake</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/Centos%E6%9B%B4%E6%94%B9kernel%20%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E9%A1%B9/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Centos 更改kernel 默认启动项">Centos 更改kernel 默认启动项</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/centos%E5%8D%87%E7%BA%A7gcc%E5%88%B09.1.0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="centos升级gcc到9.1.0">centos升级gcc到9.1.0</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/BIOS/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="BIOS">BIOS</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All linux "
           href="/2020/08/13/linux/ACPI%E6%98%AF%E4%BB%80%E4%B9%88&BIOS%E4%B8%ADACPI%E8%A6%81%E6%80%8E%E4%B9%88%E8%AE%BE%E7%BD%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ACPI是什么,BIOS中ACPI要怎么设置">ACPI是什么,BIOS中ACPI要怎么设置</span>
            <span class="post-date" title="2020-08-13 00:05:46">2020/08/13</span>
        </a>
        
        <a  class="All LearnLinks "
           href="/2020/08/13/links/Learning_links/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Learning Links">Learning Links</span>
            <span class="post-date" title="2020-08-13 00:05:45">2020/08/13</span>
        </a>
        
        <a  class="All language python "
           href="/2020/08/13/language/python/linux_install_python_pip_pipenv/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Install python3 &amp; pip3 &amp; pipenv">Install python3 &amp; pip3 &amp; pipenv</span>
            <span class="post-date" title="2020-08-13 00:05:45">2020/08/13</span>
        </a>
        
        <a  class="All language go "
           href="/2020/08/13/language/go/goLang/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="go language">go language</span>
            <span class="post-date" title="2020-08-13 00:05:45">2020/08/13</span>
        </a>
        
        <a  class="All language c "
           href="/2020/08/13/language/c/gdb/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="gdb">gdb</span>
            <span class="post-date" title="2020-08-13 00:05:45">2020/08/13</span>
        </a>
        
        <a  class="All Englisth 5500 "
           href="/2020/08/13/Englist_Learn/Englisth1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unit 1">Unit 1</span>
            <span class="post-date" title="2020-08-13 00:05:45">2020/08/13</span>
        </a>
        
        <a  class="All deeplearning "
           href="/2020/08/13/deeplearning/deeplearning_01_get_started/"
           data-tag="deeplearning"
           data-author="" >
            <span class="post-title" title="deeplearning 01 getting started">deeplearning 01 getting started</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <a  class="All blogs "
           href="/2020/08/13/blogs/Restful_API/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Restful API">Restful API</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <a  class="All blogs "
           href="/2020/08/13/blogs/HTTP_TCP_Socket/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HTTP, TCP, Socket">HTTP, TCP, Socket</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <a  class="All blogs "
           href="/2020/08/13/blogs/Hexo_03_%E5%86%99%E5%8D%9A%E5%AE%A2%E8%AF%AD%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hexo 03 写博客语法">Hexo 03 写博客语法</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <a  class="All blogs "
           href="/2020/08/13/blogs/Hexo_02_git_clone_blog%E5%90%8E%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C%20-%20%E5%89%AF%E6%9C%AC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hexo 02 git clone blog后如何运行">Hexo 02 git clone blog后如何运行</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <a  class="All blogs "
           href="/2020/08/13/blogs/Hexo_01_%E9%83%A8%E7%BD%B2github_blog/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hexo 01 部署github blog">Hexo 01 部署github blog</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <a  class="All "
           href="/2020/08/13/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2020-08-13 00:05:44">2020/08/13</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-micro_service/03_kubernetes_ns_pod" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">03 Kubernetes nodes, namespace, pod</h1>
    
    <div class="article-meta">
        
        <span class="top"><a>置顶</a></span>
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="microService">microService</a> > 
            
            <a  data-rel="microService&lt;---&gt;kubernetes">kubernetes</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color1">kubernetes</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2020-08-11 00:36:21'>2020-08-13 00:05</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:9.4k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                Comment:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#nodes"><span class="toc-text">nodes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建别名和补全"><span class="toc-text">创建别名和补全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node-标签"><span class="toc-text">node 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#taint污点"><span class="toc-text">taint污点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Namespace"><span class="toc-text">Namespace</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#隔离性"><span class="toc-text">隔离性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置默认命名空间"><span class="toc-text">设置默认命名空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建命名空间"><span class="toc-text">创建命名空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#划分方式"><span class="toc-text">划分方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标记命名空间"><span class="toc-text">标记命名空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看标记-istio-injection-enabled-标签的命名空间"><span class="toc-text">查看标记 istio-injection&#x3D;enabled 标签的命名空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除namespace"><span class="toc-text">删除namespace</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#POD"><span class="toc-text">POD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看pod解释"><span class="toc-text">查看pod解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建POD"><span class="toc-text">创建POD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pod标签labels"><span class="toc-text">pod标签labels</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pod-注解"><span class="toc-text">pod 注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看该-pod-的完整描述文件："><span class="toc-text">查看该 pod 的完整描述文件：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#执行pod容器"><span class="toc-text">执行pod容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#容器进程-网络等"><span class="toc-text">容器进程, 网络等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看Pod-svc日志"><span class="toc-text">查看Pod, svc日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#部署应用程序"><span class="toc-text">部署应用程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启Pod"><span class="toc-text">重启Pod</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除Pod"><span class="toc-text">删除Pod</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#livenessProbe-存活探针-readinessProbe"><span class="toc-text">livenessProbe 存活探针, readinessProbe</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看-readinessProbe-healthProbe"><span class="toc-text">查看 readinessProbe, healthProbe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#affinity"><span class="toc-text">affinity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pod启动停止控制"><span class="toc-text">Pod启动停止控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReplicationController"><span class="toc-text">ReplicationController</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#由RC创建POD"><span class="toc-text">由RC创建POD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取有关-ReplicationController-的信息"><span class="toc-text">获取有关 ReplicationController 的信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑RC的YAML配置"><span class="toc-text">编辑RC的YAML配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RC-扩容"><span class="toc-text">RC 扩容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除RC"><span class="toc-text">删除RC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReplicaSet"><span class="toc-text">ReplicaSet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#matchExpressions选择器"><span class="toc-text">matchExpressions选择器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看-replicaset-和-deployment-的详细信息"><span class="toc-text">查看 replicaset 和 deployment 的详细信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除ReplicaSet"><span class="toc-text">删除ReplicaSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DaemonSet"><span class="toc-text">DaemonSet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看DaemonSet"><span class="toc-text">查看DaemonSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除ds"><span class="toc-text">删除ds</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Job资源"><span class="toc-text">Job资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#删除job"><span class="toc-text">删除job</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CornJob-资源"><span class="toc-text">CornJob 资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看cronjob"><span class="toc-text">查看cronjob</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cronjob运行状态"><span class="toc-text">cronjob运行状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除cronjob"><span class="toc-text">删除cronjob</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#secret"><span class="toc-text">secret</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建自己的Secret"><span class="toc-text">创建自己的Secret</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configmap"><span class="toc-text">Configmap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#downwardAPI"><span class="toc-text">downwardAPI</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="nodes"><a href="#nodes" class="headerlink" title="nodes"></a>nodes</h2><pre><code>$ kubectl get nodes -o wide
NAME         STATUS   ROLES    AGE   VERSION   INTERNAL-IP     EXTERNAL-IP   OS-IMAGE                KERNEL-VERSION           CONTAINER-RUNTIME
hci-node01   Ready    master   5d    v1.18.1   10.67.108.211   &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1062.el7.x86_64   docker://19.3.8
hci-node02   Ready    &lt;none&gt;   5d    v1.18.1   10.67.109.142   &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1062.el7.x86_64   docker://19.3.8
hci-node03   Ready    &lt;none&gt;   5d    v1.18.1   10.67.109.147   &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1062.el7.x86_64   docker://19.3.8
hci-node04   Ready    &lt;none&gt;   5d    v1.18.1   10.67.109.144   &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1062.el7.x86_64   docker://19.3.8
$ kubectl describe node hci-node02
输出显示了节点的状态、 CPU 和内存数据、系统信息、运行容器的节点等

查看某台机器的资源
$ kubectl describe node hci-node01</code></pre><h3 id="创建别名和补全"><a href="#创建别名和补全" class="headerlink" title="创建别名和补全"></a>创建别名和补全</h3><p>kubectl 会被经常使用。很快你就会发现每次不得不打全命令是非常痛苦的。<br>将下面的代码添加到 ~/.bashrc 或类似的文件中 ：</p>
<pre><code>alias k=kubectl</code></pre><p>为kuebctl配置 tab 补全<br>需要先安装一个叫作 bashcompletio口的包来启用 bash 中的 tab 命令补全， 然后可以运行接下来的命令（也需要加到 ~/.bashrc 或类似的文件中）</p>
<pre><code>$ source &lt;{kubectl completion bash)
$ kubectl desc&lt;TAB&gt; nod&lt;TAB&gt; hci&lt;TAB&gt;</code></pre><p>但是需要注意的是， tab 命令行补全只在使用完整的 kubectl 命令时会起作用,(当使用别名 k 时不会起作用). 需要改变 kubectl completion 的输出来修复：</p>
<pre><code>$ source &lt;(kubectl completion bash | sed s/kubectl/k/g)</code></pre><h3 id="node-标签"><a href="#node-标签" class="headerlink" title="node 标签"></a>node 标签</h3><pre><code>$ kubectl get nodes
$ kubectl label node server02 gpu=false
$ kubectl label node server02 gpu=true --overwrite    //修改node标签
$ kubectl get node -L gpu        // 列出所有node，并添加GPU一列进行展示
$ kubectl get node -l gpu        // 只列出含标签的key为gpu的node
$ kubectl get node -l gpu=false    // 只列出含gpu=false的node</code></pre><p>将POD调度到指定的node上: kubia-gpu.yaml</p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
name: kubia-gpu        // 指定生成的POD名字
spec:
nodeSelector:        // node选择器,选择含标签gpu=true的node机器
    gpu: &quot;true&quot;        
containers:
- image: luksa/kubia    // 要拉取的 image 名字
    name: kubia            // 生成的 container 名字

$ kubectl create -f kubia-gpu.yaml</code></pre><p>如果没有标签为gpu=true的合适node， 通过 $ kubectl describe pod/kubia-nogpu 查看Message， 会报 0/2 nodes are available: 2 node(s) didn’t match node selector.信息</p>
<pre><code>$ kubectl describe pod/kubia-gpu
......
Node-Selectors:  gpu=true
......</code></pre><h3 id="taint污点"><a href="#taint污点" class="headerlink" title="taint污点"></a>taint污点</h3><p>给Node添加污点可以让配置tolerations的Pod部署上来，而不让平常的Pod部署.<br>配置tolerations的Pod可以部署到添加污点的机器也可以部署到其它平常机器</p>
<pre><code>$ kubectl taint nodes NodeName gpu=true:NoSchedule

apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-demo
  namespace: dev
spec:
  selector:
    matchLabels:
      app: web-demo
  replicas: 3            // 副本数3来测试能部署到哪些机器
  template:
    metadata:
      labels:
        app: web-demo
    spec:
      selector:
        matchLabels:
          app: web-demo
      replicas: 1
      template:
        metadata:
          labels:
            app: web-demo
        spec:
          containers:
          - name: web-demo
            image: hub.mooc.com/kubernetes/web:v1
            ports:
            - containerPort: 8080
          tolerations:        // 可以部署到有设置taint的机器，也可以部署到其它机器
          - key: &quot;gpu&quot;
            operator: &quot;Equal&quot;
            value: &quot;true&quot;
            effect: &quot;NoSchedule&quot;</code></pre><blockquote>
<p>典型的使用kubeadm部署和初始化的Kubernetes集群，master节点被设置了一个node-role.kubernetes.io/master:NoSchedule的污点，可以使用kubectl describe node <node-name>命令查看<br>这个污点表示默认情况下master节点将不会调度运行Pod，即不运行工作负载, 对于使用二进制手动部署的集群设置和移除这个污点的命令如下:</p>
</blockquote>
<pre><code>$ kubectl taint nodes &lt;node-name&gt; node-role.kubernetes.io/master=:NoSchedule
$ kubectl taint nodes &lt;node-name&gt; node-role.kubernetes.io/master:NoSchedule-</code></pre><blockquote>
<p>kubeadm初始化的Kubernetes集群，master节点也被打上了一个node-role.kubernetes.io/master=的label，标识这个节点的角色为master。给Node设置Label和设置污点是两个不同的操作。设置Label和移除Label的操作命令如下</p>
</blockquote>
<p>设置Label</p>
<pre><code>$ kubectl label node node1 node-role.kubernetes.io/master=</code></pre><p>移除Label</p>
<pre><code>$ kubectl label node node1 node-role.kubernetes.io/master-</code></pre><h2 id="Namespace"><a href="#Namespace" class="headerlink" title="Namespace"></a>Namespace</h2><blockquote>
<p>大多数对象的名称必须符合 RFC 1035 （域名）中规定的命名规范 ，这意味着它们可能只包含字母、数字、横杠（－）和点号，但命名空间（和另外几个）不允许包含点号</p>
</blockquote>
<h3 id="隔离性"><a href="#隔离性" class="headerlink" title="隔离性"></a>隔离性</h3><blockquote>
<p>名字的隔离只是 通过svc名称(DNS) 访问的隔离，通过svc的IP和Pod的IP再加上端口号(Port) 照样可以访问不同命名空间下的服务.</p>
</blockquote>
<h3 id="设置默认命名空间"><a href="#设置默认命名空间" class="headerlink" title="设置默认命名空间"></a>设置默认命名空间</h3><blockquote>
<p>默认Kubeclt获取default命名空间下的资源，可以通过设置K8s上下文配置文件如kube.config 使得某个命名空间变为默认namespace，获取pod时候不需要在加上 -n 参数</p>
</blockquote>
<h3 id="创建命名空间"><a href="#创建命名空间" class="headerlink" title="创建命名空间"></a>创建命名空间</h3><blockquote>
<p>namespace不提供网络隔离, 如果命名空间 foo 中的某个 pod 知道命名空间 bar 中 pod 的 IP 地址，那它就可以将流量（例如 HTTP 请求）发送到另一个 pod<br>第一种： commands方式</p>
</blockquote>
<pre><code>$ kubectl create namespace custom-namespace
$ kubectl create ns custom-namespace</code></pre><p>第二种： Yaml方式， 之所以选择使用 YAML 文件，只是为了强化Kubemetes中的所有内容都是一 个 API 对象这一概念</p>
<pre><code>$ touch custom-namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: custom-namespace
$ kubectl create -f custom-namespace.yaml</code></pre><h3 id="划分方式"><a href="#划分方式" class="headerlink" title="划分方式"></a>划分方式</h3><pre><code>* 按环境划分: dev(开发), test(测试)
* 按团队划分
* 自定义多级划分</code></pre><h3 id="标记命名空间"><a href="#标记命名空间" class="headerlink" title="标记命名空间"></a>标记命名空间</h3><pre><code>$ kubectl label namespace default istio-injection=enabled --overwrite         // enabled
$ kubectl label namespace default istio-injection=disabled --overwrite        // disabled
$ kubectl label namespace default istio-injection= --overwrite                // cancel set
namespace/default labeled</code></pre><h3 id="查看标记-istio-injection-enabled-标签的命名空间"><a href="#查看标记-istio-injection-enabled-标签的命名空间" class="headerlink" title="查看标记 istio-injection=enabled 标签的命名空间"></a>查看标记 istio-injection=enabled 标签的命名空间</h3><pre><code>$ kubectl get namespace -L istio-injection
NAME              STATUS   AGE   ISTIO-INJECTION
default           Active   85m   enabled
istio-system      Active   25m   disabled
kube-node-lease   Active   85m
kube-public       Active   85m
kube-system       Active   85m
[root@hci-node01 istio-1.5.2]#</code></pre><h3 id="删除namespace"><a href="#删除namespace" class="headerlink" title="删除namespace"></a>删除namespace</h3><p>删除当前命名空间中的所有资源，可以删除ReplicationCcontroller和pod,以及我们创建的所有service<br>第一个 all 指定正在删除所有资源类型, –all 选项指定将删除所有资源实例, 而不是按名称指定它们<br>使用 all 关键字删除所有内容并不是真的完全删除所有内容。 一些资源比如Secret会被保留下来， 并且需要被明确指定删除</p>
<pre><code>$ kubectl delete all --all        // 命令也会删除名为 kubernetes 的Service, 但它应该会在几分钟后自动重新创建</code></pre><p>可以简单地删除整个命名空间（ pod 将会伴随命名空间 自动删除〉</p>
<pre><code>$ kubectl delete ns custom-namespace</code></pre><p>强制删除NAMESPACE</p>
<pre><code>$ kubectl delete namespace NAMESPACENAME --force --grace-period=0</code></pre><p>进入kube-system下得etcd pod 删除需要删除的NAMESPACE</p>
<pre><code>$ kubectl get po -n kube-system
NAME                                 READY   STATUS    RESTARTS   AGE
etcd-hci-node01                      1/1     Running   5          16d
......

$ kubectl exec -it etcd-hci-node01 sh -n kube-system
$ etcdctl del /registry/namespaces/NAMESPACENAME</code></pre><h2 id="POD"><a href="#POD" class="headerlink" title="POD"></a>POD</h2><h3 id="查看pod解释"><a href="#查看pod解释" class="headerlink" title="查看pod解释"></a>查看pod解释</h3><pre><code>$ kubectl explain pod
KIND:     Pod
VERSION:  v1

DESCRIPTION:
    Pod is a collection of containers that can run on a host. This resource is
    created by clients and scheduled onto hosts.

FIELDS:
apiVersion   &lt;string&gt;
    APIVersion defines the versioned schema of this representation of an
    object. Servers should convert recognized schemas to the latest internal
    value, and may reject unrecognized values. More info:
    https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources

kind &lt;string&gt;
    Kind is a string value representing the REST resource this object
    represents. Servers may infer this from the endpoint the client submits
    requests to. Cannot be updated. In CamelCase. More info:
    https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds

metadata     &lt;Object&gt;
    Standard object&apos;s metadata. More info:
    https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata

spec &lt;Object&gt;
    Specification of the desired behavior of the pod. More info:
    https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status

status       &lt;Object&gt;
    Most recently observed status of the pod. This data may not be up to date.
    Populated by the system. Read-only. More info:
    https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status</code></pre><p>深入理解POD属性</p>
<pre><code>$ kubectl explain pod.apiVersion
$ kubectl explain pod.kind
$ kubectl explain pod.spec</code></pre><p>pods 的缩写是 po, service 的缩写是 SVC, replicationcontroller 的缩写 rc</p>
<pre><code>$ kubectl get pods -n kube-system</code></pre><blockquote>
<p>我们提到过每个 pod 都有自己的 IP 地址，但是这个地址是集群 内部的，不能从集群外部访问。<br>要让 pod 能够从外部访问 ， 需要通过服务对象公开它， 要创建一个特殊的 LoadBalancer 类型的服务。<br>因为如果你创建一个常规服务（ 一个 Cluster IP 服务）， 比如 pod ，它也 只能从集群内部访问。<br>通过创建 LoadBalanc er 类型 的服务，将创建一个外部的负载均衡 ，可以通过 负载均衡的公共 IP 访问 pod </p>
</blockquote>
<h3 id="创建POD"><a href="#创建POD" class="headerlink" title="创建POD"></a>创建POD</h3><p>通过上传 JSON 或 YAML 描述文件到 Kubemetes API 服务器来创建 pod.<br>kubectl create -f 命令用于从YAML或JSON文件创建任何资源（不只是 pod).<br>    $ kubectl create -f kubia-manual.yaml<br>    $ kubectl create -f kubia-gpu.yaml -n custom-namespace    //船舰pod到custom-namespace命名空间下</p>
<pre><code>$ kubectl describe pod/kubia
......
Events:
Type    Reason     Age    From               Message
----    ------     ----   ----               -------
Normal  Scheduled  5m12s  default-scheduler  Successfully assigned default/kubia-liveness to server02
Normal  Pulling    5m8s   kubelet, server02  Pulling image &quot;luksa/kubia-unhealthy&quot;</code></pre><h3 id="pod标签labels"><a href="#pod标签labels" class="headerlink" title="pod标签labels"></a>pod标签labels</h3><pre><code>$ kubectl get po --show-labels</code></pre><p>查看pod标签的key值为creation_method 和 env 的信息</p>
<pre><code>$ kubectl get po -L creation_method,env
NAME                           READY   STATUS    RESTARTS   AGE   CREATION_METHOD   ENV
kubia                          1/1     Running   0          16h
kubia-manual-v2                1/1     Running   0          34m   manual            pod</code></pre><p>POD添加标签</p>
<pre><code>$ kubectl label po kubia  creation_method=manual
NAME                           READY   STATUS    RESTARTS   AGE   CREATION_METHOD   ENV
kubia                          1/1     Running   0          16h   manual
kubia-manual-v2                1/1     Running   0          43m   manual            pod</code></pre><p>更改现有标签, 在更改现有标签时， 需要使用–overwrite选项</p>
<pre><code>$ kubectl label po kubia-manual-v2 env=debug --overwrite</code></pre><p>使用标签列出POD</p>
<pre><code>$ kubectl get po -1 creation_method=manual
$ kubectl get po -l env</code></pre><p>同样列出没有env标签的pod<br>确保使用单引号来圈引 !env, 这样bash shell才不会解释感叹号（译者注：感叹号在bash中有特殊含义， 表示事件指示器)</p>
<pre><code>$ kubectl get po -l &apos;!env&apos;
creation_method!=manual 选择带有creation_method标签， 并且值不等于manual的pod
env in (prod, devel)选择带有env标签且值为prod或devel的pod
env notin (prod, devel)选择带有env标签， 但其 值不是prod或devel的pod
app=pc,rel=beta 选择pc微服务的beta版本pod</code></pre><h2 id="pod-注解"><a href="#pod-注解" class="headerlink" title="pod 注解"></a>pod 注解</h2><pre><code>$ kubectl annotate pod kubia-gpu mycompany.com/someannotion=&quot;foo bar&quot;
$ kubectl describe pod/kubia-gpu
......
Annotations:  mycompany.com/someannotion: foo bar
......</code></pre><h3 id="查看该-pod-的完整描述文件："><a href="#查看该-pod-的完整描述文件：" class="headerlink" title="查看该 pod 的完整描述文件："></a>查看该 pod 的完整描述文件：</h3><pre><code>$ kubectl get po kubia-manual -o yaml    // 获取yaml格式信息
$ kubect1 get po kubia-manual -o json    // 获取json格式信息</code></pre><h3 id="执行pod容器"><a href="#执行pod容器" class="headerlink" title="执行pod容器"></a>执行pod容器</h3><p>直接执行:</p>
<pre><code>$ kubectl exec fortioclient-f8d65c6bb-5k4td -c captured date -n twopods</code></pre><p>进入容器执行, 当pod中只有一个容器时可以不加-c参数指定某个容器</p>
<pre><code>$ kubectl exec fortioclient-f8d65c6bb-5k4td -c captured -i -t /bin/sh -n twopods</code></pre><h3 id="容器进程-网络等"><a href="#容器进程-网络等" class="headerlink" title="容器进程, 网络等"></a>容器进程, 网络等</h3><p>查看进程command完整信息</p>
<pre><code>$ ps auxwww
$ pa -ef</code></pre><p>查看网络</p>
<pre><code>$ netstat -ntlp</code></pre><h3 id="查看Pod-svc日志"><a href="#查看Pod-svc日志" class="headerlink" title="查看Pod, svc日志"></a>查看Pod, svc日志</h3><pre><code>$ kubectl logs pod/istiod-774777b79-ddfk4 -n istio-system
$ kubectl logs -f pod/&lt;pod_name&gt; #类似tail -f的方式查看(tail -f 实时查看日志文件 tail -f 日志文件log)
$ kubectl logs svc/istiod -n istio-system
如果该pod中有其他容器， 可以通过如下命令获取其日志：
$ kubectl logs kubia-manual -c kubia</code></pre><p>查看容器重启后前一个容器为什么重启的日志信息<br>    $ kubectl logs mypod –previous</p>
<h3 id="部署应用程序"><a href="#部署应用程序" class="headerlink" title="部署应用程序"></a>部署应用程序</h3><pre><code>$ kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml</code></pre><h3 id="重启Pod"><a href="#重启Pod" class="headerlink" title="重启Pod"></a>重启Pod</h3><pre><code>$ kubectl get pod {podname} -n {namespace} -o yaml | kubectl replace --force -f -</code></pre><h3 id="删除Pod"><a href="#删除Pod" class="headerlink" title="删除Pod"></a>删除Pod</h3><pre><code>$ kubectl delete pod PODNAME -n custom-namespace        // 删除指定命名空间下的POD
$ kubectl delete po -l creation_method=manual            // 通过标签选择器来删除
$ kubectl delete po --all -n custom-namespace            // 删除当前命名空间中的所有 pod
$ kubectl delete all --all -n custom-namespace            // 删除所有pod和svc，系统带的kubernetes服务会过一会重启</code></pre><p>可使用kubectl中的强制删除命令删除POD</p>
<pre><code>$ kubectl delete pod PODNAME --force --grace-period=0</code></pre><p>直接从ETCD中删除源数据<br>删除default namespace下的pod名为pod-to-be-deleted-0</p>
<pre><code>$ ETCDCTL_API=3 etcdctl del /registry/pods/default/pod-to-be-deleted-0</code></pre><h2 id="livenessProbe-存活探针-readinessProbe"><a href="#livenessProbe-存活探针-readinessProbe" class="headerlink" title="livenessProbe 存活探针, readinessProbe"></a>livenessProbe 存活探针, readinessProbe</h2><p>Kubemetes 可以通过存活探针 (liveness probe) 检查容器是否还在运行.<br>Kubemetes 可以通过readinessProbe探针 检查容器是否准备完毕可以挂到负载均衡上供外部访问.<br>livenessProbe与readinessProbe探针用法完全一样, 都有三种，下面介绍这三种健康检查方式.</p>
<p>可以为 pod 中的每个容器单独指定存活探针。 如果探测失败， Kubemetes 将定期执行探针并重新启动容器</p>
<ul>
<li>第一种健康检查方式: 执行命令检查存活探针是否存活</li>
</ul>
<pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-demo
  namespace: dev
spec:
  selector:
    matchLabels:
      app: web-demo
  replicas: 1
  template:
    metadata:
      labels:
        app: web-demo
    spec:
      selector:
        matchLabels:
          app: web-demo
      replicas: 1
      template:
        metadata:
          labels:
            app: web-demo
        spec:
          containers:
          - name: web-demo
            image: hub.mooc.com/kubernetes/web:v1
            ports:
            - containerPort: 8080
            livenessProbe:                // 检查应用是否存活的探针, 和容器一个级别
              exec:                        // 第一种健康检查方式, 通过执行命令
                command:
                - /bin/sh
                - -c
                - ps -ef|grep java|grep -v grep
              initialDelaySeconds: 10        // 容器起来后过10s开始检查
              periodSeconds: 10                // 每隔10s检查一次
              failureThreshold: 2            // 连续健康检查失败2次放弃检查, 重启容器
              successThreshold: 1            // 检查一次满足条件就认为健康检查通过
              timeoutSeconds: 5                // 每次健康检查delay时间是5s, 超时也认为健康检查失败, 重启容器
            readinessProbe:                // readinessProbe与livenessProbe用法完全一样.
              exec:                        // 第一种检查方式, 通过执行命令
                command:
                - /bin/sh
                - -c
                - ps -ef|grep java|grep -v grep
              initialDelaySeconds: 10        // 容器起来后过10s开始检查
              periodSeconds: 10                // 每隔10s检查一次
              failureThreshold: 2            // 连续健康检查失败2次放弃检查, 重启容器
              successThreshold: 1            // 检查一次满足条件就认为健康检查通过
              timeoutSeconds: 5                // 每次健康检查delay时间是5s, 超时也认为健康检查失败, 重启容器</code></pre><ul>
<li>第二种健康检查方式: 执行网络请求检查存活探针是否存活</li>
</ul>
<pre><code>$ touch kubia-liveness-probe.yaml
apiVersion: v1
kind: Pod
metadata:
  name: kubia-liveness
spec:
  containers:
  - image: luksa/kubia-unhealthy
    name: kubia
    livenessProbe:        // 一个 HTTP GET 存活探针
      httpGet:            // 第二种健康检查方式, 通过httpGet
        path: /            // 应用要访问的路径
        port: 8080        // 容器本身启动的端口
        scheme: HTTP
      initialDelaySeconds: 15        // 容器起来后过10s开始检查
      periodSeconds: 5

$ kubectl get pods
NAME                           READY   STATUS    RESTARTS   AGE
kubia-liveness                 1/1     Running   1          13m</code></pre><p>查看该pod描述</p>
<pre><code>$ kubectl describe pod/kubia-liveness
......
Last State:     Terminated
  Reason:       Error
  Exit Code:    137
  Started:      Wed, 13 May 2020 15:49:36 +0800
  Finished:     Wed, 13 May 2020 15:51:25 +0800
Ready:          True
Restart Count:  1
Liveness:       http-get http://:8080/ delay=0s timeout=1s period=10s #success=1 #failure=3
......</code></pre><p>数字137是两个 数字的总和：128+x, 其中x是终止进程的信号编号.<br>在这个例子中，x等于9, 这是SIGKILL的信号编号，意味着这个进程被强行终止.<br>当容器被强行终止时，会创建一个全新的容器—-而不是重启原来的容器.<br>delay=Os部分显示在容器启动后立即开始探测.<br>timeout仅设置为1秒，因此容器必须在1秒内进行响应， 不然这次探测记作失败.<br>每10秒探测一次容器(period=lOs), 并在探测连续三次失败(#failure=3)后重启容器.<br>定义探 针时可以自定义这些附加参数。例如，要设 置初始延迟，请将initialDelaySeconds属性添加到存活探针的配置中.</p>
<pre><code>    livenessProbe:        // 一个 HTTP GET 存活探针
      httpGet:
        path: /
        port: 8080
      initialDelaySeconds: 15    // Kubernetes会在第—次探测前等待15秒 

$ kubectl describe pod/kubia-liveness
......
Liveness:       http-get http://:8080/ delay=15s timeout=1s period=10s #success=1 #failure=3</code></pre><ul>
<li>第三种健康检查方式: 通过TCP检查端口是否处于监听状态<pre><code>livenessProbe:        // 一个 HTTP GET 存活探针
  tcpSocket:
    port: 8080
  initialDelaySeconds: 20    // Kubernetes会在第—次探测前等待15秒 
  periodSeconds: 5</code></pre></li>
</ul>
<blockquote>
<p>如果没有设置初始延迟，探针将在启动时立即开始探测容器， 这通常会导致探测失败， 因为应用程序还没准备好开始接收请求.<br>务必记得设置一个初始延迟未说明应用程序的启动时间.<br>对于在生产中运行的pod, 一定要定义一个存活探针。没有探针的话，Kubemetes无法知道你的应用是否还活着。只要进程还在运行， Kubemetes会认为容器是健康的<br>Kubernetes会在你的容器崩溃或其存活探针失败时， 通过重启容器来保持运行。 这项任务由承载pod的节点上的Kubelet 执行 一— 在主服务器上运行的Kubernetes Control Plane组件不会参与此过程.<br>但如果节点本身崩溃， 那么Control Plane 必须为所有随节点停止运行的pod创建替代品。 它不 会为你直接创建的pod执行此操作 。 这些pod只被Kubelet 管理.</p>
</blockquote>
<h3 id="查看-readinessProbe-healthProbe"><a href="#查看-readinessProbe-healthProbe" class="headerlink" title="查看 readinessProbe, healthProbe"></a>查看 readinessProbe, healthProbe</h3><pre><code>$ kubectl edit po -n istio-system istio-ingressgateway-6489d9556d-wjr58
$ kubectl edit deployment -n istio-system istio-ingressgateway
$ kubectl logs po/istio-ingressgateway-6489d9556d-wjr58 -n istio-system
$ kubectl get po -A</code></pre><h3 id="affinity"><a href="#affinity" class="headerlink" title="affinity"></a>affinity</h3><p>匹配Node标签, Pod部署到哪台机器上.</p>
<pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-demo
  namespace: dev
spec:
  selector:
    matchLabels:
      app: web-demo
  replicas: 1
  template:
    metadata:
      labels:
        app: web-demo
    spec:
      selector:
        matchLabels:
          app: web-demo
      replicas: 1
      template:
        metadata:
          labels:
            app: web-demo
        spec:
          containers:
          - name: web-demo
            image: hub.mooc.com/kubernetes/web:v1
            ports:
            - containerPort: 8080
          affinity:
            nodeAffinity:        // node亲和性, 要部署到哪台机器，不要部署到哪台机器
              requiredDuringSchedulingIgnoredDuringExecution:    // 必须满足下面条件才会执行调度
                nodeSelectorTerms:        // 数组形式, 下面可以定义多个Terms, 它们之间是或的关系
                - matchExpressions:        // 数组形式, 如果定义多个matchExpressions它们之间是与的关系
                  - key: beta.kubernetes.io/arch    // 节点的label含有的key名字, 这里的是由K8s根据机器自动生成的
                    operator: In
                    values:                // 前提是Node机器有amd64标签K8s才会把容器部署到次Node机器
                    - amd64                // 通过kubectl get nodes NodeName -o yaml进行查看
              preferredDuringSchedulingIgnoredDuringExecution:    // 最好是怎样调度
              - weight: 1                // 权重
                perference:
                  matchExpressions:
                  - key: disktype        // 通过kubectl get nodes --show-labels查看
                    operator: NotIn
                    values:
                    - ssd
            podAffinity:        // Pod亲和性, 想和哪些Pod部署到一台机器, 不想和哪些Pod部署在一台机器
              requiredDuringSchedulingIgnoredDuringExecution:
              - labelSelector:
                  matchExpressions:
                  - key: app
                    operator: In        // 要跟app=web-demo的Pod运行在同一个节点上
                    values:
                    - web-demo-node
                topologyKey: kubernetes.io/hostname        // 节点的label名字
              preferredDuringSchedulingIgnoredDuringExecution:
              - weight: 100
                podAffinityTerm:
                  labelSelector:
                    matchExpressions:
                    - key: app
                      operator: In
                      values:
                      - web-demo-node
                  topologyKey: kubernetes.io/hostname
            podAntiAffinity:        // Pod反亲和性, 不想和哪些Pod部署到一台机器, 用法和podAffinity用法完全一样
            pod反亲和性用的很多的是上面的replicas: 的值 &gt;=2 时候会把容器副本分别部署到不同机器</code></pre><h3 id="Pod启动停止控制"><a href="#Pod启动停止控制" class="headerlink" title="Pod启动停止控制"></a>Pod启动停止控制</h3><p>Pod容器启动时候和停止前所做的事</p>
<pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-demo
  namespace: dev
spec:
  selector:
    matchLabels:
      app: web-demo
  replicas: 1
  template:
    metadata:
      labels:
        app: web-demo
    spec:
      selector:
        matchLabels:
          app: web-demo
      replicas: 1
      template:
        metadata:
          labels:
            app: web-demo
        spec:
          containers:
          - name: web-demo
            image: hub.mooc.com/kubernetes/web:v1
            ports:
            - containerPort: 8080
            volumeMounts:
            - name: shared-volume
              mounthPath: /shared-web
            lifecycle:                Pod里容器启动前和停止前要做的事
              postStart:
                exec:
                  command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo web starting ... &gt;&gt; /var/log/messages&quot;]
              preStop:
                exec:
                  command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo web stopping ... &gt;&gt; /var/log/messages &amp;&amp; sleep 3&quot;]</code></pre><h2 id="ReplicationController"><a href="#ReplicationController" class="headerlink" title="ReplicationController"></a>ReplicationController</h2><p>一个ReplicationController有三个主要部分<br> • label selector ( 标签选择器）， 用于确定ReplicationController作用域中有哪些pod<br> • replica count (副本个数）， 指定应运行的pod 数量<br> • pod template (pod模板）， 用于创建新的pod 副本<br>使用 ReplicationController 的好处<br> •确保一 个 pod (或多个 pod副本）持续运行， 方法是在现有pod 丢失时启动一个新 pod。<br> • 集群节点发生故障时， 它将为故障节 点 上运 行的所有 pod (即受ReplicationController 控制的节点上的那些 pod) 创建替代副本。<br> • 它能轻松实现 pod的水平伸缩 手动和自动都可以</p>
<h3 id="由RC创建POD"><a href="#由RC创建POD" class="headerlink" title="由RC创建POD"></a>由RC创建POD</h3><p>kubia-rc.yaml, 内容如下:</p>
<pre><code>apiVersion: v1
kind: ReplicationController        // 这里的配置定义了ReplicationController(RC)
metadata:
  name: kubia        // ReplicationController 的名字
spec:
  replicas: 3        // pod 实例的目标数目
  selector:            // selector也可以不写，replica 直接根据下面的template模板里的lables标签选择创建POD
    app: kubia        // pod 选择器决定了 RC 的操作对象
  template:            // 从此以下都是创建新 pod 所用的 pod 模板, 与单独创建的pod定义yaml文件内容几乎相同
    metadata:
      labels:
        app: kubia
    spec:
      containers:
      - name: kubia
        image: luksa/kubia
        ports:
        - containerPort: 8080</code></pre><p>创建ReplicationController并由其创建pod</p>
<pre><code>$ kubectl create -f kubia-rc.yaml
$ kubectl get po -o wide
NAME          READY   STATUS    RESTARTS   AGE   IP          NODE       NOMINATED NODE   READINESS GATES
kubia-6wnj5   1/1     Running   0          56s   10.44.0.3   server02   &lt;none&gt;           &lt;none&gt;
kubia-788p8   1/1     Running   0          56s   10.44.0.2   server02   &lt;none&gt;           &lt;none&gt;
kubia-c9kn6   1/1     Running   0          56s   10.44.0.1   server02   &lt;none&gt;           &lt;none&gt;

$ kubectl delete po kubia-6wnj5
NAME          READY   STATUS              RESTARTS   AGE
kubia-6ntgt   0/1     ContainerCreating   0          12s
kubia-6wnj5   1/1     Terminating         0          3m3s
kubia-788p8   1/1     Running             0          3m3s
kubia-c9kn6   1/1     Running             0          3m3s</code></pre><p>上面重新列出pod会显示四个， 因为你删除的pod己终止， 并且己创建一个新的pod<br>虽然ReplicationController会立即收到删除pod的通知 (API 服务器允许客户端监听资源和资源列表的更改），但这不是它创建替代pod的原因。<br>该通知会触发控制器检查实际的pod数量并采取适当的措施.</p>
<pre><code>$ kubectl get po -o wide
NAME          READY   STATUS    RESTARTS   AGE     IP          NODE       NOMINATED NODE   READINESS GATES
kubia-6ntgt   1/1     Running   0          53s     10.44.0.4   server02   &lt;none&gt;           &lt;none&gt;
kubia-788p8   1/1     Running   0          3m44s   10.44.0.2   server02   &lt;none&gt;           &lt;none&gt;
kubia-c9kn6   1/1     Running   0          3m44s   10.44.0.1   server02   &lt;none&gt;           &lt;none&gt;</code></pre><h3 id="获取有关-ReplicationController-的信息"><a href="#获取有关-ReplicationController-的信息" class="headerlink" title="获取有关 ReplicationController 的信息"></a>获取有关 ReplicationController 的信息</h3><pre><code>$ kubectl get rc -o wide
$ kubectl get rc -o wide -n default        // RC是针对某个namespace下做的副本pod控制
NAME    DESIRED   CURRENT   READY   AGE   CONTAINERS   IMAGES        SELECTOR
kubia   3         3         3       17m   kubia        luksa/kubia   app=kubia
获取RC的详细信息
$ kubectl describe rc kubia</code></pre><p>如果你更改了 一个 pod 的标签，使它不再 与 ReplicationController 的标签选择器相匹配 ， 那么该 pod 就变得和其他手动创建的 pod 一样了<br>更改 pod 的标签时， ReplicationController 发现一个 pod 丢失了 ， 并启动一个新的pod替换它.</p>
<p>给其中一个 pod 添加了 type=special 标签，再次列出所有 pod 会显示和以前一样的三个 pod 。 因为从 ReplicationCon位oiler 角度而言， 没发生任何更改.</p>
<pre><code>$ kubectl label pod/kubia-6ntgt type=special
$ kubectl get pod --show-labels
NAME          READY   STATUS    RESTARTS   AGE   LABELS
kubia-6ntgt   1/1     Running   0          27m   app=kubia,type=special
kubia-788p8   1/1     Running   0          30m   app=kubia
kubia-c9kn6   1/1     Running   0          30m   app=kubia</code></pre><p>更改app标签该 pod 不再与 RC 的标签选择器相匹配</p>
<pre><code>$ kubectl label pod/kubia-6ntgt app=foo --overwrite
$ kubectl get pod --show-labels
NAME          READY   STATUS              RESTARTS   AGE   LABELS
kubia-6ntgt   1/1     Running             0          30m   app=foo,type=special
kubia-788p8   1/1     Running             0          33m   app=kubia
kubia-c9kn6   1/1     Running             0          33m   app=kubia
kubia-dqshz   0/1     ContainerCreating   0          4s    app=kubia</code></pre><p>使用 -L app 选项在列 中显示 app 标签</p>
<pre><code>$ kubectl get pod -L app
NAME          READY   STATUS    RESTARTS   AGE     APP
kubia-6ntgt   1/1     Running   0          32m     foo
kubia-788p8   1/1     Running   0          35m     kubia
kubia-c9kn6   1/1     Running   0          35m     kubia
kubia-dqshz   1/1     Running   0          2m17s   kubia</code></pre><p>可能有一个 bug 导致你的 pod 在特定时间或特定事件后开始出问题。<br>如果你知道某个 pod 发生了故障， 就可以将它从 Replication-Controller 的管理范围中移除， 让控制器将它替换为新 pod, 接着这个 pod 就任你处置了。 完成后删除该pod 即可。</p>
<h3 id="编辑RC的YAML配置"><a href="#编辑RC的YAML配置" class="headerlink" title="编辑RC的YAML配置"></a>编辑RC的YAML配置</h3><p>用默认文本编辑器中打开ReplicationController的YAML配置，会在/tmp目录生成一个临时yaml文件，退出后/tmp目录下的yaml文件也会删掉<br>如果你想使用nano编辑Kubernetes资源，请执行以下命令（或将其放入 ~/.bashrc或等效文件中）<br>export KUBE_EDITOR=”/usr/bin/nano”</p>
<pre><code>$ kubectl edit rc kubia
......
 spec:
   replicas: 3
   selector:
     app: kubia1                 RC selector 修改，需要配合下面的label一起修改
   template:
     metadata:
       creationTimestamp: null
       labels:
         app: kubia1             Pod label 修改，需要配合上面的 RC selector 一起修改
     spec:
       containers:
       - image: luksa/kubia
         imagePullPolicy: Always
         name: kubia
         ports:
         - containerPort: 8080
           protocol: TCP
......

$ kubectl get pod
NAME          READY   STATUS              RESTARTS   AGE   APP
kubia-279wl   0/1     ContainerCreating   0          2s    kubia1
kubia-6ntgt   1/1     Running             0          44m   foo
kubia-788p8   1/1     Running             0          47m   kubia
kubia-c9kn6   1/1     Running             0          47m   kubia
kubia-dqshz   1/1     Running             0          14m   kubia
kubia-m6vml   0/1     Pending             0          2s    kubia1
kubia-xxjqr   0/1     ContainerCreating   0          2s    kubia1</code></pre><h3 id="RC-扩容"><a href="#RC-扩容" class="headerlink" title="RC 扩容"></a>RC 扩容</h3><p>扩展/缩容 RC管理的pod为5个<br>第一种，commands方式:</p>
<pre><code>$ kubectl scale rc kubia --replicas=5</code></pre><p>第二种， edit rc yaml文件</p>
<pre><code>$ kubectl edit rc kubia
......
spec:
  replicas: 5
......</code></pre><h3 id="删除RC"><a href="#删除RC" class="headerlink" title="删除RC"></a>删除RC</h3><p>当使用 kubectl delete 删除 ReplicationController 时， 可以通过给命令增加 –cascade= false 选项来保持 pod 的运行.</p>
<pre><code>$ kubectl delete rc kubia --cascade=false</code></pre><p>已经删除了 ReplicationController, 所以这些 pod 独立了， 它们不再被管理。但是你始终可以使用适当的标签选择器创建新的 ReplicationController, 并再次将它们管理起来</p>
<h2 id="ReplicaSet"><a href="#ReplicaSet" class="headerlink" title="ReplicaSet"></a>ReplicaSet</h2><blockquote>
<p>最 初， ReplicationController 是用于复制和在异常时重新调度节点的唯 一Kubemetes 组件， 后来又引入了 一个名为 ReplicaSet 的类似资源 。 它是新一代的ReplicationController, 并且将其完全替换掉 (ReplicationController 最终将被弃用）。<br>也就是说从现在起， 你应该始终创建 ReplicaSet 而不是 ReplicationController。 它们几乎完全相同， 所以你不会碰到任何麻烦<br>ReplicaSet 的行为与ReplicationController 完全相同， 但pod 选择器的表达能力更强<br>ReplicationController 都无法仅基千标签名的存在来匹配 pod, 而ReplicaSet 则可以。 例如， ReplicaSet 可匹配所有包含名为 env 的标签的 pod, 无论ReplicaSet 的实际值是什么（可以理解为 env=*)</p>
</blockquote>
<p>kubia-replicaset.yaml</p>
<pre><code>apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: kubia
spec:
  replicas: 3
  selector:
    matchLabels:
      app: kubia
  template:
    metadata:
      labels:
        app: kubia
    spec:
      containers:
      - name: kubia
        image: luksa/kubia
        ports:
        - containerPort: 8080</code></pre><p>检查replicaset:</p>
<pre><code>$ kubectl get rs</code></pre><h3 id="matchExpressions选择器"><a href="#matchExpressions选择器" class="headerlink" title="matchExpressions选择器"></a>matchExpressions选择器</h3><p>创建个yaml文件<br>kubia-replicaset-matchexpressions.yaml</p>
<pre><code>selector:
  matchExpressions:
    - key: app
      operator: In
      values:
        - kubia</code></pre><p>每个表达式都必须 包含一个key, 一个operator (运算符），并且可能还有一个values的列表（取决于 运算符）.<br>• In : Label的值 必须与其中 一个指定的values 匹配。<br>• Notln : Label的值与任何指定的values 不匹配。<br>• Exists : pod 必须包含一个指定名称的标签（值不重要）。使用此运算符时，<br>不应指定 values字段。<br>• DoesNotExist : pod不得包含有指定名称的标签。values属性不得指定<br>如果同时指定matchLabels和matchExpressions, 则所有标签都必须匹配，并且所有表达式必须计算为true以使该pod与选择器匹配.</p>
<h3 id="查看-replicaset-和-deployment-的详细信息"><a href="#查看-replicaset-和-deployment-的详细信息" class="headerlink" title="查看 replicaset 和 deployment 的详细信息"></a>查看 replicaset 和 deployment 的详细信息</h3><pre><code>$ kubectl describe deployment details-v1
$ kubectl describe rs details-v1-6fc55d65c9</code></pre><h3 id="删除ReplicaSet"><a href="#删除ReplicaSet" class="headerlink" title="删除ReplicaSet"></a>删除ReplicaSet</h3><p>删除ReplicaSet会删除所有的pod,这种情况下是需要列出pod来确认.</p>
<pre><code>$ kubectl delete rs kubia</code></pre><h2 id="DaemonSet"><a href="#DaemonSet" class="headerlink" title="DaemonSet"></a>DaemonSet</h2><p>如果节点下线， DaemonSet不会在其他地方重新创建pod。 但是， 当将一个新节点添加到集群中时， DaemonSet会立刻部署一个新的pod实例。<br>如果有人无意中删除了 一个 pod ， 那么它也会重新创建 一个新的 pod。<br>与 ReplicaSet一样，DaemonSet 从配置的 pod 模板创建 pod.</p>
<blockquote>
<p>如果节点可以被设置为不可调度的 ， 防止 pod 被部署到节点上. DaemonSet 甚至会将 pod 部署到这些节点上，因为无法调度的属性只会被调度器使用，而 DaemonSet 管理的 pod 则完全绕过调度器. 这是预期的，因为DaemonSet的目的是运行系统服务，即使是在不可调度的节点上，系统服务通常也需要运行.</p>
</blockquote>
<p>给node节点打上label</p>
<pre><code>$ kubectl label node server02 disk=ssd</code></pre><p>ssd-monitor-daemonset.yaml</p>
<pre><code>apiVersion: apps/v1            // DaemooSet在apps的API组 中，版本是v1
kind: DaemonSet
metadata:
  name: ssd-monitor
spec:
  selector:
    matchLabels:
      app: ssd-monitor
  template:
    metadata:
      labels:
        app: ssd-monitor
    spec:
      nodeSelector:            // pod模板包含 会选择有disk=ssd标签的节点 一个节点选择器
        disk: ssd
      containers:
      - name: main
        image: luksa/ssd-monitor

$ kubectl create -f ssd-monitor-daemonset.yaml</code></pre><h3 id="查看DaemonSet"><a href="#查看DaemonSet" class="headerlink" title="查看DaemonSet"></a>查看DaemonSet</h3><pre><code>$ kubectl get ds
NAME          DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE     CONTAINERS   IMAGES              SELECTOR
ssd-monitor   1         1         1       1            1           disk=ssd        3m29s   main         luksa/ssd-monitor   app=ssd-monitor</code></pre><p>如果你有多个节点并且其他的节点也加上了同样的标签，将会看到 DaemonSet 在每个节点上都启动 pod.<br>给其中一个节点修改标签disk=hdd, 假设它的硬盘换成磁盘而不是SSD, 那个节点上的pod会如预期中被终止.<br>如果还有其他的 pod在运行， 删除 DaemonSet 也会一起删除这些 pod。</p>
<h3 id="删除ds"><a href="#删除ds" class="headerlink" title="删除ds"></a>删除ds</h3><p>删除ds会删除由ds控制schedule到每个节点的pod</p>
<pre><code>$ kubectl delete ds ssd-monitor</code></pre><h2 id="Job资源"><a href="#Job资源" class="headerlink" title="Job资源"></a>Job资源</h2><p>Kubemetes 通过 Job 资源提供了对此的支持，它允许你运行一种 pod, 该 pod 在内部进程成功结束时， 不重启容器。<br>一旦任务完成， pod 就被认为处于完成状态.<br>由Job管理的pod会一直被重新安排，直到它们成功完成任务.</p>
<p>exporter.yaml</p>
<pre><code>apiVersion: batch/v1
kind: Job
metadata:
  name: batch-job
spec:
  template:
    metadata:
      labels:
        app: batch-job
    spec:
      restartPolicy: OnFailure        // 默认为Always,Job pod不能使用默认策略， 因为它们不是要无限期地运行
      containers:
      - name: main
        image: luksa/batch-job        // 运行luksa/batch-job镜像，该镜像调用 一个运行120秒的进程，然后退出</code></pre><p>需要明确地将重启策略 restartPolicy 设置为 OnFailure 或 Never。 此设置防止容器在完成任务时重新启动</p>
<pre><code>$ kubectl create -f exporter.yaml

$ kubectl get pod
NAME                READY   STATUS    RESTARTS   AGE
batch-job-lhnfg     1/1     Running   0          113s

$ kubectl get jobs
NAME        COMPLETIONS   DURATION   AGE
batch-job   0/1           111s       111s</code></pre><p>等待两三分钟后</p>
<pre><code>$ kubectl get pod
NAME                READY   STATUS      RESTARTS   AGE
batch-job-lhnfg     0/1     Completed   0          3m21s

$ kubectl get job
NAME        COMPLETIONS   DURATION   AGE
batch-job   1/1           2m41s      3m27s</code></pre><p>完成后pod未被删除的原因是允许你查阅其日志</p>
<pre><code>$ kubectl logs po/batch-job-lhnfg
Thu May 14 05:04:38 UTC 2020 Batch job starting
Thu May 14 05:06:38 UTC 2020 Finished succesfully</code></pre><p>pod 可以被直接删除， 或者在删除创建它的Job时被删除<br>作业可以配置为创建多个pod实例，并以并行或串行方式运行它们<br>在Job配置中设置 completions和parallelism属性来完成的<br>如果你需要 一个Job运行多次，则可以将comple巨ons设为你希望作业的pod运行多少次</p>
<pre><code>apiVersion: batch/v1
kind: Job
metadata:
  name: multi-completion-batch-job
spec:
  completions: 5    // job将一个接一个地运行五个pod
  parallelism: 2    // 最多两个pod可以并行运行
  template:
    metadata:
      labels:
        app: batch-job
    spec:
      restartPolicy: OnFailure
      containers:
      - name: main
        image: luksa/batch-job</code></pre><p>它最初创建一个pod, 当pod的容器运行完成时，它创建第二个pod, 以此类推，直到五个pod成功完成。<br>如果其中 一个pod发生故障，工作会创建一个新的pod, 所以Job总共可以创建五个以上的pod.</p>
<pre><code>$ kubectl create -f multi-completion-batch-job.yaml
NAME                               READY   STATUS              RESTARTS   AGE
multi-completion-batch-job-8kzd5   0/1     ContainerCreating   0          4s
multi-completion-batch-job-9rnxs   0/1     ContainerCreating   0          4s</code></pre><p>只要其中 一个pod完成任务，工作将运行下 一个pod, 直到五个pod都成功完成任务.</p>
<pre><code>kubectl get po
NAME                               READY   STATUS    RESTARTS   AGE
multi-completion-batch-job-8kzd5   1/1     Running   0          2m8s
multi-completion-batch-job-9rnxs   1/1     Running   0          2m8s

$ kubectl get job
NAME                         COMPLETIONS   DURATION   AGE
multi-completion-batch-job   0/5           2m13s      2m13s</code></pre><p>POD虽然创建，但是POD里的进程任务还没有完成，因此job显示任然是0/5没有一个pod任务完成<br>再等待一会时间</p>
<pre><code>$ kubectl get po
NAME                               READY   STATUS      RESTARTS   AGE
multi-completion-batch-job-8kzd5   0/1     Completed   0          4m18s
multi-completion-batch-job-9rnxs   0/1     Completed   0          4m18s
multi-completion-batch-job-blntb   1/1     Running     0          107s
multi-completion-batch-job-qhsr5   1/1     Running     0          92s
ssd-monitor-jbhpd                  1/1     Running     0          176m

$ kubectl get job
NAME                         COMPLETIONS   DURATION   AGE
multi-completion-batch-job   2/5           4m16s      4m16s</code></pre><p>如上显示已经有2个POD任务完成，POD退出.<br>甚至可以在 Job 运行时更改 Job 的 parallelism 属性, command如下，实验环境没有成功使用</p>
<pre><code>$ kubectl scale job multi-completion-batch-job --replicas 3</code></pre><blockquote>
<p>通过在 pod 配置中设置 activeDeadlineSeconds 属性，可以限制 pod的时间。如果 pod 运行时间超过此时间， 系统将尝试终止 pod, 并将 Job 标记为失败。<br>通过指定 Job manifest 中的 spec.backoff巨m辽字段， 可以配置 Job在被标记为失败之前可以重试的次数。 如果你没有明确指定它， 则默认为6</p>
</blockquote>
<h3 id="删除job"><a href="#删除job" class="headerlink" title="删除job"></a>删除job</h3><p>删除job时，由job创建的pod也被直接删除</p>
<pre><code>$ kubectl delete job multi-completion-batch-job</code></pre><h2 id="CornJob-资源"><a href="#CornJob-资源" class="headerlink" title="CornJob 资源"></a>CornJob 资源</h2><blockquote>
<p>批处理任务需要在特定的时间运行，或者在指定的时间间隔内重复运行,在 Linux 和类 UNIX 操作系统中， 这些任务通常被称为 cron 任务。 Kubemetes 也支持这种任务<br>Kubemetes 中的 cron 任务通过创建 CronJob 资源进行配置, 运行任务的时间表以知名的 cron 格式指定<br>时间表从左到右包含以下五个条目<br>• 分钟<br>• 小时<br>• 每月中的第几天<br>• 月<br>• 星期几</p>
</blockquote>
<p>创建资源文件(kube API 对象文件)cronjob.yaml</p>
<pre><code>apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: batch-job-every-fifteen-minutes
spec:
  schedule: &quot;0,15,30,55 * * * *&quot;
  startingDeadlineSeconds: 15    // pod最迟必须在预定时间后15秒开始运行， 如果因为任何原因到该启动时间15s后仍不启动，任务将不会运行，并将显示为Failed
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app: periodic-batch-job
        spec:
          restartPolicy: OnFailure
          containers:
          - name: main
            image: luksa/batch-job</code></pre><blockquote>
<p>希望每 15 分钟运行一 次任务因此 schedule 字段的值应该是”0, 15, 30, 45****” 这意味着每小时的 0 、 15 、 30和 45 分钟（第一个星号），每月的每一天（第二个星号），每月（第三个星号）和每周的每一天（第四个星号）。<br>相反，如果你希望每隔 30 分钟运行一 次，但仅在每月的第一天运行，则应将计划设置为 “0,30 * 1 * *”, 并且如果你希望它每个星期天的 3AM 运行，将它设置为 “0 3 * * 0” (最后一个零代表星期天）。</p>
</blockquote>
<h3 id="查看cronjob"><a href="#查看cronjob" class="headerlink" title="查看cronjob"></a>查看cronjob</h3><pre><code>$ kubectl get cronjob -o wide
NAME                              SCHEDULE             SUSPEND   ACTIVE   LAST SCHEDULE   AGE    CONTAINERS   IMAGES            SELECTOR
batch-job-every-fifteen-minutes   0,15,30,55 * * * *   False     0        18m             112m   main         luksa/batch-job   &lt;none&gt;</code></pre><h3 id="cronjob运行状态"><a href="#cronjob运行状态" class="headerlink" title="cronjob运行状态"></a>cronjob运行状态</h3><pre><code>$ kubectl get po
NAME                                               READY   STATUS      RESTARTS   AGE
batch-job-every-fifteen-minutes-1589439300-4v8wd   0/1     Completed   0          36m
batch-job-every-fifteen-minutes-1589439600-99pns   0/1     Completed   0          31m
batch-job-every-fifteen-minutes-1589440500-vs5vm   0/1     Completed   0          16m
batch-job-every-fifteen-minutes-1589441400-52rzb   1/1     Running     0          112s

$ kubectl get job
NAME                                         COMPLETIONS   DURATION   AGE
batch-job-every-fifteen-minutes-1589439300   1/1           2m24s      36m
batch-job-every-fifteen-minutes-1589439600   1/1           2m24s      31m
batch-job-every-fifteen-minutes-1589440500   1/1           2m22s      16m
batch-job-every-fifteen-minutes-1589441400   0/1           116s       116s</code></pre><p>再过一点时间查看</p>
<pre><code>$ kubectl get po
NAME                                               READY   STATUS      RESTARTS   AGE
batch-job-every-fifteen-minutes-1589439600-99pns   0/1     Completed   0          32m
batch-job-every-fifteen-minutes-1589440500-vs5vm   0/1     Completed   0          17m
batch-job-every-fifteen-minutes-1589441400-52rzb   0/1     Completed   0          2m34s

$ kubectl get job
NAME                                         COMPLETIONS   DURATION   AGE
batch-job-every-fifteen-minutes-1589439600   1/1           2m24s      32m
batch-job-every-fifteen-minutes-1589440500   1/1           2m22s      17m
batch-job-every-fifteen-minutes-1589441400   1/1           2m20s      2m37s</code></pre><p>总结: CornJob过指定的时间执行一次POD，执行完退出，会保留三个POD和Job记录.</p>
<h3 id="删除cronjob"><a href="#删除cronjob" class="headerlink" title="删除cronjob"></a>删除cronjob</h3><p>运行中的 Job 将不会被终止，不会删除 Job 或 它们的 Pod。为了清理那些 Job 和 Pod，需要列出该 Cron Job 创建的Job，然后删除它们.</p>
<pre><code>$ batch-job-every-fifteen-minutes
cronjob.batch &quot;batch-job-every-fifteen-minutes&quot; deleted</code></pre><h2 id="secret"><a href="#secret" class="headerlink" title="secret"></a>secret</h2><pre><code>$ kubectl get secret -n default
NAME                  TYPE                                  DATA   AGE
default-token-gtcjx   kubernetes.io/service-account-token   3      32d

$ kubectl get pods -o wide
NAME                               READY   STATUS    RESTARTS   AGE     IP           NODE         NOMINATED NODE   READINESS GATES
wordpress-7bfc545758-vtfvm         1/1     Running   5          10d     10.36.0.10   hci-node04   &lt;none&gt;           &lt;none&gt;
wordpress-mysql-764fc64f97-sjnjk   1/1     Running   0          10d     10.36.0.8    hci-node04   &lt;none&gt;           &lt;none&gt;

$ kubectl get po/wordpress-7bfc545758-vtfvm -o yaml
......
spec:
  containers:
  - env:
    volumeMounts:
    - mountPath: /var/www/html
      name: wordpress-persistent-storage
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: default-token-gtcjx
      readOnly: true
......
  volumes:
  - name: wordpress-persistent-storage
    persistentVolumeClaim:
      claimName: wp-pv-claim
  - name: default-token-gtcjx
    secret:
      defaultMode: 420        // 访问权限
      secretName: default-token-gtcjx
......</code></pre><p>进入wordpress-7bfc545758-vtfvm所在机器的容器里查看/var/run/secrets/kubernetes.io/serviceaccount路径文件</p>
<pre><code>$ docker exec -it daec0458a397 /bin/sh
# ls /var/run/secrets/kubernetes.io/serviceaccount
  ca.crt  namespace  token</code></pre><h3 id="创建自己的Secret"><a href="#创建自己的Secret" class="headerlink" title="创建自己的Secret"></a>创建自己的Secret</h3><p>serviceAccount 用来跟Apiserver通信，用来授权, 可以创建自己的Secret<br>编写Secret配置文件 secret.yaml</p>
<pre><code>apiVersion: v1
kind: Secret
metadata:
  name: dbpass
type: Opaque        // 不透明，浑浊的.
data:
  username: aW1vb2M=        // base64加密的用户名
  passwd: aW1vb2MxMjM=        // base64加密的密码</code></pre><p>把字符串生成base64很简单，命令如下</p>
<pre><code>$ echo -n imooc | base64    // -n 表示换行
aW1vb2M=</code></pre><p>编写Pod资源配置文件 pod-secret.yaml</p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: pod-secret
spec:
  containers:
  - name: springbook-web
    image: hub.mooc.com/kubernetes/springboot-web:v1
    ports:
    - containerPort: 8080
    volumeMounts:
    - name: db-secret
      mountPath: /db-secret
      readOnly: true
  volumes:
  - name: db-secret
    projected:
      sources:            // secret 来源
      - secret:
        name: dbpass    // secret 名字</code></pre><p>生成Pod并进入查看</p>
<pre><code>$ / # cd /db-secret/
$ ls
  passwd username
$ cat -n username        // 查看容器里存放的是base64解码过的数据
  immoc
$ cat -n passwd
  imooc123</code></pre><p>可以通过修改secret.yaml文件修改secret账号密码等再$ kubectl apply -f secret.yaml来更改密码.</p>
<h2 id="Configmap"><a href="#Configmap" class="headerlink" title="Configmap"></a>Configmap</h2><blockquote>
<p>configmap常用来存储不需要加密的数据, 比如应用的启动参数，一些参数的配置等</p>
</blockquote>
<ul>
<li>第一种向k8s添加很多key value的键值对属性值，就可以用configmap</li>
</ul>
<pre><code>$ touch game.properties
$ vim game.properties
  enemies=aliens
  lives=3
  enemies.cheat=true
  secret.code.allowed=true
  ......</code></pre><p>配置到K8S里</p>
<pre><code>$ kubectl create configmap web-game --from-file game.properties
$ kubectl get cm</code></pre><p>使用configmap, Pod-game.yaml</p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: pod-game
spec:
  containers:
  - name: web
    image: hub.mooc.com/kubernetes/springboot-web:v1
    ports:
    - containerPort: 8080
    volumeMounts:
    - name: game
      mountPath: /etc/config/game
      readOnly: true
  volumes:
  - name: game
    configMap:
      name: web-game</code></pre><p>生成Pod并进入查看</p>
<pre><code>$ cd /etc/config/game
$ ls
  game.properties
$ cat game.properties
  enemies=aliens
  lives=3
  enemies.cheat=true
  secret.code.allowed=true
  ......</code></pre><p>可以通过kubectl edit 修改configMap账号密码等</p>
<pre><code>$ kubectl edit cm web-game -o yaml
  enemies.cheat=false    //等等操作</code></pre><ul>
<li>第二种配置文件方式创建configMap<br>configmap.yaml</li>
</ul>
<pre><code>apeVersion: v1
kind: Configmap
metadata:
  name: configs
data:
  Java_OPTS: -Xms1024m
  LOG_LEVEL: DEBUG

$ kubectl create -f configmap.yaml</code></pre><p>编写资源配置文件pod-env.yaml</p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: pod-env
spec:
  containers:
  - name: web
    image: hub.mooc.com/kubernetes/springboot-web:v1
    ports:
    - containerPort: 8080
    env:
      - name: LOG_LEVEL_CONFIG
        valueFrom:
          configMapKeyRef:
            name: configs        // 指定configMap名字
            key: LOG_LEVEL        // configs下面的LOG_LEVEL</code></pre><p>进入容器查看环境变量</p>
<pre><code>$ env | grep LOG
  LOG_LEVEL_CONFIG=DEBUG</code></pre><p>之后次容器就可以通过环境变量获取值</p>
<ul>
<li>第三种 通过命令行方式传进参数<br>也是先跟第二种一样创建configMap资源</li>
</ul>
<pre><code>$ kubectl create -f configmap.yaml</code></pre><p>编写资源配置文件pod-cmd.yaml</p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: pod-cmd
spec:
  containers:
  - name: web
    image: hub.mooc.com/kubernetes/springboot-web:v1
    command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;java -jar /springboot-web.jar -DJAVA_OPTS=$(JAVA_OPTS)&quot;]
    ports:
    - containerPort: 8080
    env:
      - name: Java_OPTS
        valueFrom:
          configMapKeyRef:
            name: configs        // 指定configMap名字
            key: Java_OPTS        // configs下面的LOG_LEVEL</code></pre><p>进入容器查看进程</p>
<pre><code>$ ps -ef
  java -jar /springboot-web.jar -DJAVA_OPTS=-Xms1024m</code></pre><h2 id="downwardAPI"><a href="#downwardAPI" class="headerlink" title="downwardAPI"></a>downwardAPI</h2><p>downwardAPI主要作用是在程序中取得Pod对象本身的一些相关信息<br>pod-downwardapi.yaml</p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: pod-downwardapi
  labels:
    app： downwardapi
    type: webapp
spec:
  containers:
  - name: web
    image: hub.mooc.com/kubernetes/springboot-web:v1
    ports:
    - containerPort: 8080
    volumeMounts:
      - name: podinfo
        mountPath: /etc/podinfo
  volumes:
    - name: podinfo
      projected:
        sources:
        - downwardAPI:
          items:
            - path: &quot;labels&quot;
              fieldRef:
                fieldPath: metadata.labels
            - path: &quot;name&quot;
              fieldRef:
                fieldPath: metadata.name
            - path: &quot;namespace&quot;
              fieldRef:
                fieldPath: metadata.namespace
            - path: &quot;mem-request&quot;
              resourceFieldRef:
                containerName: web
                resource: limits.memory</code></pre><p>进入容器查看文件信息</p>
<pre><code>$ cd /etc/podinfo
$ ls -l
  labels mem-request name namespace
$ cat -n labels
  app=&quot;downwardapi&quot;
  type=&quot;webapp&quot;
$ cat -n namespace
  default
$ cat -n name
  pod-downwardapi</code></pre>
      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">💰</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'b52060ecaee3da3300c2',
            clientSecret: 'a2497fa5608f31fbcf075ab465e32edc8cda73a9',
            repo: 'Kung-Fu-Master.github.io',
            owner: 'Kung-Fu-Master',
            admin: ['Kung-Fu-Master'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2020-2029 Kung-Fu-Master
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 582px;
    }
    .nav.fullscreen {
        margin-left: -582px;
    }
    .nav-left {
        width: 160px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 552px;
        }
        .nav.fullscreen {
            margin-left: -552px;
        }
        .nav-left {
            width: 160px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 552px;
            margin-left: -552px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #c1bfc1;
    }
    
    
    .nav-right nav a.hover > span{
        color: #ffffff !important;
    }
    

    /*列表样式*/
    
    #post .pjax article .article-entry>ol, #post .pjax article .article-entry>ul, #post .pjax article>ol, #post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    #post .pjax article .article-entry li>ol, #post .pjax article .article-entry li>ul,#post .pjax article li>ol, #post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    #post .pjax article .article-entry>ol>li, #post .pjax article .article-entry>ul>li,#post .pjax article>ol>li, #post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    #post .pjax article .article-entry li>ol>li, #post .pjax article .article-entry li>ul>li,#post .pjax article li>ol>li, #post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
